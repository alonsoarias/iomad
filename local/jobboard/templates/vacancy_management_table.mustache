{{!
    @template local_jobboard/vacancy_management_table

    Vacancy management table template.

    Context variables:
    * vacancies - Array of vacancy objects
    * hasvacancies - Boolean
    * createurl - URL to create new vacancy
    * pagination - Pagination HTML
    * filters - Filter values
}}
<div class="jb-vacancy-management">
    <div class="jb-d-flex jb-justify-content-between jb-align-items-center jb-mb-3">
        <h4 class="jb-mb-0">{{#str}}managevacancies, local_jobboard{{/str}}</h4>
        <a href="{{createurl}}" class="jb-btn jb-btn-primary">
            <i class="fa fa-plus jb-mr-1" aria-hidden="true"></i>
            {{#str}}createvacancy, local_jobboard{{/str}}
        </a>
    </div>

    {{#hasvacancies}}
    <div class="jb-table-responsive">
        <table class="jb-table jb-table-hover">
            <thead class="jb-thead-light">
                <tr>
                    <th>{{#str}}code, local_jobboard{{/str}}</th>
                    <th>{{#str}}title, local_jobboard{{/str}}</th>
                    <th>{{#str}}status, local_jobboard{{/str}}</th>
                    <th>{{#str}}positions, local_jobboard{{/str}}</th>
                    <th>{{#str}}applications, local_jobboard{{/str}}</th>
                    <th>{{#str}}closedate, local_jobboard{{/str}}</th>
                    <th>{{#str}}actions, local_jobboard{{/str}}</th>
                </tr>
            </thead>
            <tbody>
                {{#vacancies}}
                <tr data-vacancy-id="{{id}}">
                    <td>
                        <span class="jb-badge jb-badge-secondary">{{code}}</span>
                    </td>
                    <td>
                        <a href="{{viewurl}}" class="jb-font-weight-bold">{{title}}</a>
                        {{#department}}
                        <br><small class="jb-text-muted">{{department}}</small>
                        {{/department}}
                    </td>
                    <td>
                        <span class="jb-badge jb-badge-{{statusclass}}">{{statuslabel}}</span>
                    </td>
                    <td>{{positions}}</td>
                    <td>
                        {{#applicationcount}}
                        <a href="{{applicationsurl}}">{{applicationcount}}</a>
                        {{/applicationcount}}
                        {{^applicationcount}}0{{/applicationcount}}
                    </td>
                    <td>
                        {{closedate}}
                        {{#isexpired}}
                        <span class="jb-badge jb-badge-danger jb-ml-1">{{#str}}expired, local_jobboard{{/str}}</span>
                        {{/isexpired}}
                    </td>
                    <td>
                        <div class="jb-btn-group jb-btn-group-sm">
                            <a href="{{viewurl}}" class="jb-btn jb-btn-outline-primary" title="{{#str}}view, local_jobboard{{/str}}">
                                <i class="fa fa-eye" aria-hidden="true"></i>
                            </a>
                            {{#canedit}}
                            <a href="{{editurl}}" class="jb-btn jb-btn-outline-secondary" title="{{#str}}edit, local_jobboard{{/str}}">
                                <i class="fa fa-edit" aria-hidden="true"></i>
                            </a>
                            {{/canedit}}
                            {{#canpublish}}
                            <a href="{{publishurl}}" class="jb-btn jb-btn-outline-success" title="{{#str}}publish, local_jobboard{{/str}}">
                                <i class="fa fa-check-circle" aria-hidden="true"></i>
                            </a>
                            {{/canpublish}}
                            {{#canclose}}
                            <a href="{{closeurl}}" class="jb-btn jb-btn-outline-warning" title="{{#str}}close, local_jobboard{{/str}}">
                                <i class="fa fa-times-circle" aria-hidden="true"></i>
                            </a>
                            {{/canclose}}
                            {{#candelete}}
                            <a href="{{deleteurl}}" class="jb-btn jb-btn-outline-danger" title="{{#str}}delete, local_jobboard{{/str}}" data-confirm="{{#str}}confirmdelete, local_jobboard{{/str}}">
                                <i class="fa fa-trash" aria-hidden="true"></i>
                            </a>
                            {{/candelete}}
                        </div>
                    </td>
                </tr>
                {{/vacancies}}
            </tbody>
        </table>
    </div>
    {{{pagination}}}
    {{/hasvacancies}}
    {{^hasvacancies}}
    {{> local_jobboard/components/empty_state }}
    {{/hasvacancies}}
</div>
