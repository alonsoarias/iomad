{{!
    @template local_jobboard/reports/timeline

    Timeline report section template showing daily applications.

    Context variables:
    * daily - Array of daily application counts
    * hasdaily - Boolean if has daily data

    Example context (json):
    {
        "daily": [{"day": "2025-12-01", "count": 15}]
    }
}}
<div class="jb-report-timeline">
    <div class="jb-card jb-shadow-sm jb-mb-4">
        <div class="jb-card-header jb-bg-white">
            <h5 class="jb-mb-0">
                <i class="fa fa-calendar-alt jb-mr-2"></i>
                {{#str}}dailyapplications, local_jobboard{{/str}}
            </h5>
        </div>
        <div class="jb-card-body">
            {{#hasdaily}}
            {{! Simple chart visualization using bars }}
            <div class="jb-timeline-chart jb-mb-4">
                {{#daily}}
                <div class="jb-d-flex jb-align-items-center jb-mb-2">
                    <div class="jb-text-muted jb-fs-sm" style="width: 100px;">{{day}}</div>
                    <div class="jb-flex-grow-1 jb-mx-2">
                        <div class="jb-progress" style="height: 20px;">
                            <div class="jb-progress-bar jb-bg-primary" style="width: {{percentage}}%; min-width: 30px;">
                                {{count}}
                            </div>
                        </div>
                    </div>
                </div>
                {{/daily}}
            </div>

            {{! Data Table }}
            <div class="jb-table-responsive">
                <table class="jb-table jb-table-striped jb-table-sm">
                    <thead class="jb-thead-light">
                        <tr>
                            <th>{{#str}}date{{/str}}</th>
                            <th class="jb-text-center">{{#str}}applications, local_jobboard{{/str}}</th>
                            <th>{{#str}}trend, local_jobboard{{/str}}</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#daily}}
                        <tr>
                            <td>{{day}}</td>
                            <td class="jb-text-center jb-fw-bold">{{count}}</td>
                            <td>
                                {{#isup}}
                                <span class="jb-text-success">
                                    <i class="fa fa-arrow-up"></i> +{{change}}
                                </span>
                                {{/isup}}
                                {{#isdown}}
                                <span class="jb-text-danger">
                                    <i class="fa fa-arrow-down"></i> {{change}}
                                </span>
                                {{/isdown}}
                                {{#issame}}
                                <span class="jb-text-muted">
                                    <i class="fa fa-minus"></i> 0
                                </span>
                                {{/issame}}
                            </td>
                        </tr>
                        {{/daily}}
                    </tbody>
                </table>
            </div>
            {{/hasdaily}}

            {{^hasdaily}}
            <p class="jb-text-muted jb-text-center jb-mb-0">
                <i class="fa fa-calendar-times fa-2x jb-mb-2 jb-d-block"></i>
                {{#str}}nodata, local_jobboard{{/str}}
            </p>
            {{/hasdaily}}
        </div>
    </div>
</div>
