{{!
    @template local_jobboard/bulk_validation

    Bulk document validation template.

    Context variables:
    * documents - Array of documents for bulk validation
    * hasdocuments - Boolean
    * count - Total count
    * filters - Current filters
    * formaction - Form action URL
    * backurl - URL to go back
}}
<div class="jb-bulk-validation">
    {{> local_jobboard/components/breadcrumbs }}

    <div class="jb-d-flex jb-justify-content-between jb-align-items-center jb-mb-4">
        <h3>{{#str}}bulkvalidation, local_jobboard{{/str}}</h3>
        <span class="jb-badge jb-badge-info">{{count}} {{#str}}documents, local_jobboard{{/str}}</span>
    </div>

    {{#hasdocuments}}
    <form method="post" action="{{formaction}}" id="bulk-validation-form">
        <input type="hidden" name="sesskey" value="{{sesskey}}">

        <div class="jb-card jb-mb-4">
            <div class="jb-card-header jb-d-flex jb-justify-content-between jb-align-items-center">
                <div class="jb-form-check">
                    <input type="checkbox" class="jb-form-check-input" id="select-all">
                    <label class="jb-form-check-label" for="select-all">{{#str}}selectall, local_jobboard{{/str}}</label>
                </div>
                <div class="jb-btn-group">
                    <button type="submit" name="action" value="approve" class="jb-btn jb-btn-sm jb-btn-success">
                        <i class="fa fa-check jb-mr-1" aria-hidden="true"></i>
                        {{#str}}approveselected, local_jobboard{{/str}}
                    </button>
                    <button type="submit" name="action" value="reject" class="jb-btn jb-btn-sm jb-btn-danger">
                        <i class="fa fa-times jb-mr-1" aria-hidden="true"></i>
                        {{#str}}rejectselected, local_jobboard{{/str}}
                    </button>
                </div>
            </div>
            <div class="jb-card-body jb-p-0">
                <div class="jb-table-responsive">
                    <table class="jb-table jb-table-hover jb-mb-0">
                        <thead class="jb-thead-light">
                            <tr>
                                <th style="width: 40px;"></th>
                                <th>{{#str}}document, local_jobboard{{/str}}</th>
                                <th>{{#str}}applicant, local_jobboard{{/str}}</th>
                                <th>{{#str}}vacancy, local_jobboard{{/str}}</th>
                                <th>{{#str}}uploaded, local_jobboard{{/str}}</th>
                                <th>{{#str}}actions, local_jobboard{{/str}}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{#documents}}
                            <tr data-document-id="{{id}}">
                                <td>
                                    <input type="checkbox" name="documents[]" value="{{id}}" class="jb-form-check-input document-checkbox">
                                </td>
                                <td>
                                    <div class="jb-d-flex jb-align-items-center">
                                        <i class="fa fa-file-{{fileicon}} jb-mr-2 jb-text-muted" aria-hidden="true"></i>
                                        <div>
                                            <strong>{{doctypename}}</strong>
                                            <br><small class="jb-text-muted">{{filename}}</small>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <a href="{{applicanturl}}">{{applicantname}}</a>
                                </td>
                                <td>
                                    <small>{{vacancy.code}}</small>
                                </td>
                                <td>{{timecreated}}</td>
                                <td>
                                    <div class="jb-btn-group jb-btn-group-sm">
                                        <a href="{{viewurl}}" class="jb-btn jb-btn-outline-primary" target="_blank" title="{{#str}}view, local_jobboard{{/str}}">
                                            <i class="fa fa-eye" aria-hidden="true"></i>
                                        </a>
                                        <a href="{{validateurl}}" class="jb-btn jb-btn-outline-secondary" title="{{#str}}validateindividual, local_jobboard{{/str}}">
                                            <i class="fa fa-edit" aria-hidden="true"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            {{/documents}}
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="jb-card-footer">
                <div class="jb-row jb-align-items-center">
                    <div class="jb-col-md-6">
                        <label for="bulk-comment" class="jb-form-label">{{#str}}bulkcomment, local_jobboard{{/str}}</label>
                        <textarea name="comment" id="bulk-comment" class="jb-form-control" rows="2" placeholder="{{#str}}optionalcomment, local_jobboard{{/str}}"></textarea>
                    </div>
                    <div class="jb-col-md-6 jb-text-right jb-mt-3 jb-mt-md-0">
                        <button type="submit" name="action" value="approve" class="jb-btn jb-btn-success">
                            <i class="fa fa-check jb-mr-1" aria-hidden="true"></i>
                            {{#str}}approveselected, local_jobboard{{/str}}
                        </button>
                        <button type="submit" name="action" value="reject" class="jb-btn jb-btn-danger">
                            <i class="fa fa-times jb-mr-1" aria-hidden="true"></i>
                            {{#str}}rejectselected, local_jobboard{{/str}}
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </form>
    {{/hasdocuments}}
    {{^hasdocuments}}
    {{> local_jobboard/components/empty_state }}
    {{/hasdocuments}}

    <div class="jb-mt-4">
        <a href="{{backurl}}" class="jb-btn jb-btn-outline-secondary">
            <i class="fa fa-arrow-left jb-mr-1" aria-hidden="true"></i>
            {{#str}}back, local_jobboard{{/str}}
        </a>
    </div>
</div>
