{{!
    @template local_jobboard/pages/public/detail

    Public vacancy detail page template.
    Uses jb-* CSS classes for consistent styling.
    Includes accessibility features, animations, and loading states.

    Context variables:
    * vacancy (object) - Vacancy data
    * backurl (string) - Back URL
    * convocatoria (object) - Convocatoria info if exists
    * isloggedin (bool) - User is logged in
    * canapply (bool) - Can apply
    * hasapplied (bool) - Already applied
    * applyurl (string) - Apply URL
    * applicationsurl (string) - My applications URL
    * loginapplyurl (string) - Login and apply URL
    * sharelinks (object) - Social sharing links
    * loading (bool) - Show skeleton loading state

    Example context (json):
    {
        "vacancy": {"id": 1, "title": "Developer", "code": "DEV-001"},
        "isloggedin": true,
        "canapply": true
    }
}}
{{#loading}}
{{! Skeleton Loading State }}
<div class="local-jobboard-public-detail" aria-busy="true" aria-label="{{#str}}loading{{/str}}">
    <div class="jb-skeleton-text jb-mb-4" style="width: 120px; height: 40px;"></div>
    <div class="jb-row">
        <div class="jb-col-lg-8">
            <div class="jb-card jb-mb-4">
                <div class="jb-card-body">
                    <div class="jb-skeleton-title jb-mb-3" style="width: 80%;"></div>
                    <div class="jb-skeleton-text jb-mb-4" style="width: 100%; height: 200px;"></div>
                </div>
            </div>
        </div>
        <div class="jb-col-lg-4">
            <div class="jb-card jb-mb-4">
                <div class="jb-card-body">
                    <div class="jb-skeleton-text jb-mb-3" style="width: 100%; height: 120px;"></div>
                </div>
            </div>
        </div>
    </div>
</div>
{{/loading}}

{{^loading}}
<div class="local-jobboard-public-detail" data-region="jobboard-public-detail" data-vacancy-id="{{vacancy.id}}">
    {{! Skip Link for Accessibility }}
    <a href="#vacancy-detail-content" class="jb-skip-link">
        {{#str}}skiptocontent, local_jobboard{{/str}}
    </a>

    {{! Back Button }}
    <nav class="jb-mb-4 jb-fade-in" aria-label="{{#str}}navigation, local_jobboard{{/str}}">
        <a href="{{backurl}}" class="jb-btn jb-btn-outline-secondary jb-hover-lift">
            <i class="fa fa-arrow-left jb-mr-2" aria-hidden="true"></i>
            {{#str}}backtovacancies, local_jobboard{{/str}}
        </a>
    </nav>

    {{! Two Column Layout }}
    <div class="jb-row">
        {{! Left Column - Main Content }}
        <main class="jb-col-lg-8" id="vacancy-detail-content">
            {{! Vacancy Header Card }}
            <article class="jb-card jb-card-shadow jb-mb-4 jb-fade-in-up" aria-labelledby="vacancy-detail-title" style="animation-delay: 0.05s;">
                <div class="jb-card-header jb-d-flex jb-justify-content-between jb-align-items-center jb-bg-primary jb-text-white">
                    <span class="jb-badge jb-badge-light jb-fw-bold" aria-label="{{#str}}vacancycode, local_jobboard{{/str}}: {{vacancy.code}}">
                        <i class="fa fa-hashtag jb-mr-1" aria-hidden="true"></i>
                        {{vacancy.code}}
                    </span>
                    <span class="jb-badge jb-badge-{{vacancy.publicationtypecolor}}">
                        {{vacancy.publicationtypelabel}}
                    </span>
                </div>

                <div class="jb-card-body">
                    <h1 class="jb-card-title jb-fs-2 jb-mb-3" id="vacancy-detail-title">{{vacancy.title}}</h1>

                    {{! Convocatoria Info }}
                    {{#convocatoria}}
                    <div class="jb-mb-3 jb-p-2 jb-bg-light jb-rounded">
                        <i class="fa fa-folder-open jb-text-primary jb-mr-2" aria-hidden="true"></i>
                        {{#str}}convocatoria, local_jobboard{{/str}}:
                        <strong>{{name}}</strong>
                    </div>
                    {{/convocatoria}}

                    {{! Quick Details Badges }}
                    <div class="jb-mb-3 jb-vacancy-badges jb-d-flex jb-flex-wrap jb-gap-2" role="list" aria-label="{{#str}}vacancydetails, local_jobboard{{/str}}">
                        {{#vacancy.location}}
                        <span class="jb-badge jb-badge-light jb-py-2 jb-px-3" role="listitem">
                            <i class="fa fa-location-dot jb-text-danger jb-mr-1" aria-hidden="true"></i>
                            <span class="jb-sr-only">{{#str}}location, local_jobboard{{/str}}:</span>
                            {{vacancy.location}}
                        </span>
                        {{/vacancy.location}}

                        {{#vacancy.contracttypelabel}}
                        <span class="jb-badge jb-badge-light jb-py-2 jb-px-3" role="listitem">
                            <i class="fa fa-file-contract jb-text-info jb-mr-1" aria-hidden="true"></i>
                            <span class="jb-sr-only">{{#str}}contracttype, local_jobboard{{/str}}:</span>
                            {{vacancy.contracttypelabel}}
                        </span>
                        {{/vacancy.contracttypelabel}}

                        <span class="jb-badge jb-badge-light jb-py-2 jb-px-3" role="listitem">
                            <i class="fa fa-users jb-text-success jb-mr-1" aria-hidden="true"></i>
                            {{#str}}positions, local_jobboard{{/str}}: <strong>{{vacancy.positions}}</strong>
                        </span>
                    </div>

                    {{! Urgent Warning }}
                    {{#vacancy.isurgent}}
                    <div class="jb-alert jb-alert-warning jb-d-flex jb-align-items-center jb-pulse" role="alert">
                        <i class="fa fa-triangle-exclamation fa-lg jb-mr-3" aria-hidden="true"></i>
                        <div>
                            <strong>{{#str}}urgent, local_jobboard{{/str}}:</strong>
                            {{#str}}closesin, local_jobboard, {{vacancy.daysremaining}}{{/str}}
                        </div>
                    </div>
                    {{/vacancy.isurgent}}
                </div>
            </article>

            {{! Description Card }}
            {{#vacancy.description}}
            <section class="jb-card jb-card-shadow jb-mb-4 jb-fade-in-up" aria-labelledby="description-heading" style="animation-delay: 0.1s;">
                <div class="jb-card-header jb-bg-white">
                    <h2 class="jb-fs-5 jb-mb-0 jb-fw-bold" id="description-heading">
                        <i class="fa fa-file-lines jb-text-primary jb-mr-2" aria-hidden="true"></i>
                        {{#str}}vacancydescription, local_jobboard{{/str}}
                    </h2>
                </div>
                <div class="jb-card-body jb-prose">
                    {{{vacancy.description}}}
                </div>
            </section>
            {{/vacancy.description}}

            {{! Requirements Card }}
            {{#vacancy.requirements}}
            <section class="jb-card jb-card-shadow jb-mb-4 jb-fade-in-up" aria-labelledby="requirements-heading" style="animation-delay: 0.15s;">
                <div class="jb-card-header jb-bg-white">
                    <h2 class="jb-fs-5 jb-mb-0 jb-fw-bold" id="requirements-heading">
                        <i class="fa fa-circle-check jb-text-success jb-mr-2" aria-hidden="true"></i>
                        {{#str}}requirements, local_jobboard{{/str}}
                    </h2>
                </div>
                <div class="jb-card-body jb-prose">
                    {{{vacancy.requirements}}}
                </div>
            </section>
            {{/vacancy.requirements}}

            {{! Desirable Card }}
            {{#vacancy.desirable}}
            <section class="jb-card jb-card-shadow jb-mb-4 jb-fade-in-up" aria-labelledby="desirable-heading" style="animation-delay: 0.2s;">
                <div class="jb-card-header jb-bg-white">
                    <h2 class="jb-fs-5 jb-mb-0 jb-fw-bold" id="desirable-heading">
                        <i class="fa fa-star jb-text-warning jb-mr-2" aria-hidden="true"></i>
                        {{#str}}desirable, local_jobboard{{/str}}
                    </h2>
                </div>
                <div class="jb-card-body jb-prose">
                    {{{vacancy.desirable}}}
                </div>
            </section>
            {{/vacancy.desirable}}
        </main>

        {{! Right Column - Sidebar }}
        <aside class="jb-col-lg-4">
            {{! Apply CTA Card }}
            <section class="jb-card jb-card-shadow jb-mb-4 jb-border-primary jb-fade-in-up" aria-labelledby="apply-cta-heading" style="animation-delay: 0.1s;">
                <div class="jb-card-header jb-bg-primary jb-text-white">
                    <h2 class="jb-fs-5 jb-mb-0 jb-fw-bold" id="apply-cta-heading">
                        <i class="fa fa-paper-plane jb-mr-2" aria-hidden="true"></i>
                        {{#str}}readytoapply, local_jobboard{{/str}}
                    </h2>
                </div>
                <div class="jb-card-body jb-text-center jb-py-4">
                    {{#isloggedin}}
                        {{#hasapplied}}
                        <div class="jb-text-success" role="status">
                            <div class="jb-icon-circle-lg jb-bg-success jb-text-white jb-mx-auto jb-mb-3">
                                <i class="fa fa-check fa-2x" aria-hidden="true"></i>
                            </div>
                            <p class="jb-fw-bold jb-mb-3">{{#str}}alreadyapplied, local_jobboard{{/str}}</p>
                        </div>
                        <a href="{{applicationsurl}}" class="jb-btn jb-btn-outline-primary jb-w-100 jb-hover-lift">
                            <i class="fa fa-list jb-mr-2" aria-hidden="true"></i>
                            {{#str}}viewmyapplications, local_jobboard{{/str}}
                        </a>
                        {{/hasapplied}}

                        {{^hasapplied}}
                            {{#canapply}}
                            <p class="jb-text-muted jb-mb-3">{{#str}}applynowdesc, local_jobboard{{/str}}</p>
                            <a href="{{applyurl}}" class="jb-btn jb-btn-primary jb-btn-lg jb-w-100 jb-hover-lift" aria-label="{{#str}}applyto, local_jobboard{{/str}}: {{vacancy.title}}">
                                <i class="fa fa-paper-plane jb-mr-2" aria-hidden="true"></i>
                                {{#str}}apply, local_jobboard{{/str}}
                            </a>
                            {{/canapply}}

                            {{^canapply}}
                            <div class="jb-text-muted">
                                <i class="fa fa-lock fa-2x jb-mb-2" aria-hidden="true"></i>
                                <p class="jb-mb-0">{{#str}}cannotapply, local_jobboard{{/str}}</p>
                            </div>
                            {{/canapply}}
                        {{/hasapplied}}
                    {{/isloggedin}}

                    {{^isloggedin}}
                    <div class="jb-icon-circle-lg jb-bg-light jb-text-muted jb-mx-auto jb-mb-3">
                        <i class="fa fa-user fa-2x" aria-hidden="true"></i>
                    </div>
                    <p class="jb-text-muted jb-mb-3">{{#str}}logintoapply, local_jobboard{{/str}}</p>
                    <a href="{{loginapplyurl}}" class="jb-btn jb-btn-primary jb-btn-lg jb-w-100 jb-hover-lift">
                        <i class="fa fa-right-to-bracket jb-mr-2" aria-hidden="true"></i>
                        {{#str}}loginandapply, local_jobboard{{/str}}
                    </a>
                    {{/isloggedin}}
                </div>
            </section>

            {{! Details Card }}
            <section class="jb-card jb-card-shadow jb-mb-4 jb-fade-in-up" aria-labelledby="details-heading" style="animation-delay: 0.15s;">
                <div class="jb-card-header jb-bg-white">
                    <h2 class="jb-fs-5 jb-mb-0 jb-fw-bold" id="details-heading">
                        <i class="fa fa-circle-info jb-text-info jb-mr-2" aria-hidden="true"></i>
                        {{#str}}details, local_jobboard{{/str}}
                    </h2>
                </div>
                <div class="jb-card-body">
                    <dl class="jb-mb-0">
                        {{#vacancy.duration}}
                        <div class="jb-d-flex jb-justify-content-between jb-py-2 jb-border-bottom">
                            <dt class="jb-text-muted jb-fw-normal">
                                <i class="fa fa-clock jb-mr-2" aria-hidden="true"></i>
                                {{#str}}duration, local_jobboard{{/str}}
                            </dt>
                            <dd class="jb-mb-0 jb-fw-bold">{{vacancy.duration}}</dd>
                        </div>
                        {{/vacancy.duration}}

                        {{#vacancy.department}}
                        <div class="jb-d-flex jb-justify-content-between jb-py-2 jb-border-bottom">
                            <dt class="jb-text-muted jb-fw-normal">
                                <i class="fa fa-building jb-mr-2" aria-hidden="true"></i>
                                {{#str}}department, local_jobboard{{/str}}
                            </dt>
                            <dd class="jb-mb-0 jb-fw-bold">{{vacancy.department}}</dd>
                        </div>
                        {{/vacancy.department}}

                        <div class="jb-d-flex jb-justify-content-between jb-py-2 jb-border-bottom">
                            <dt class="jb-text-muted jb-fw-normal">
                                <i class="fa fa-calendar-check jb-mr-2" aria-hidden="true"></i>
                                {{#str}}opendate, local_jobboard{{/str}}
                            </dt>
                            <dd class="jb-mb-0">{{vacancy.opendateformatted}}</dd>
                        </div>

                        <div class="jb-d-flex jb-justify-content-between jb-py-2">
                            <dt class="jb-text-muted jb-fw-normal">
                                <i class="fa fa-calendar-xmark jb-mr-2" aria-hidden="true"></i>
                                {{#str}}closedate, local_jobboard{{/str}}
                            </dt>
                            <dd class="jb-mb-0 {{#vacancy.isurgent}}jb-text-warning jb-fw-bold{{/vacancy.isurgent}}">
                                {{#vacancy.isurgent}}<i class="fa fa-triangle-exclamation jb-mr-1" aria-hidden="true"></i>{{/vacancy.isurgent}}
                                {{vacancy.closedateformatted}}
                            </dd>
                        </div>
                    </dl>
                </div>
            </section>

            {{! Share Card }}
            <section class="jb-card jb-card-shadow jb-mb-4 jb-fade-in-up" aria-labelledby="share-heading" style="animation-delay: 0.2s;">
                <div class="jb-card-header jb-bg-white">
                    <h2 class="jb-fs-5 jb-mb-0 jb-fw-bold" id="share-heading">
                        <i class="fa fa-share-nodes jb-text-primary jb-mr-2" aria-hidden="true"></i>
                        {{#str}}share, local_jobboard{{/str}}
                    </h2>
                </div>
                <div class="jb-card-body">
                    <div class="jb-d-flex jb-justify-content-center jb-gap-2" role="group" aria-label="{{#str}}sharethisvacancy, local_jobboard{{/str}}">
                        <a href="{{sharelinks.linkedin}}" class="jb-btn jb-btn-outline-primary jb-btn-lg jb-hover-lift" target="_blank" rel="noopener noreferrer" aria-label="{{#str}}shareonlinkedin, local_jobboard{{/str}}">
                            <i class="fab fa-linkedin-in" aria-hidden="true"></i>
                            <span class="jb-sr-only">LinkedIn</span>
                        </a>
                        <a href="{{sharelinks.facebook}}" class="jb-btn jb-btn-outline-primary jb-btn-lg jb-hover-lift" target="_blank" rel="noopener noreferrer" aria-label="{{#str}}shareonfacebook, local_jobboard{{/str}}">
                            <i class="fab fa-facebook-f" aria-hidden="true"></i>
                            <span class="jb-sr-only">Facebook</span>
                        </a>
                        <a href="{{sharelinks.twitter}}" class="jb-btn jb-btn-outline-info jb-btn-lg jb-hover-lift" target="_blank" rel="noopener noreferrer" aria-label="{{#str}}shareontwitter, local_jobboard{{/str}}">
                            <i class="fab fa-twitter" aria-hidden="true"></i>
                            <span class="jb-sr-only">Twitter</span>
                        </a>
                        <a href="{{sharelinks.whatsapp}}" class="jb-btn jb-btn-outline-success jb-btn-lg jb-hover-lift" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp">
                            <i class="fab fa-whatsapp" aria-hidden="true"></i>
                            <span class="jb-sr-only">WhatsApp</span>
                        </a>
                    </div>
                </div>
            </section>
        </aside>
    </div>
</div>
{{/loading}}
