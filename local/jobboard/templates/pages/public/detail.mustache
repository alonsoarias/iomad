{{!
    @template local_jobboard/pages/public_detail

    Public vacancy detail page template.

    Context variables:
    * vacancy - Vacancy data object
    * backurl - URL to go back to listings
    * convocatoria - Convocatoria info if exists
    * isloggedin - Boolean if user is logged in
    * canapply - Boolean if user can apply
    * hasapplied - Boolean if already applied
    * applyurl - Apply URL
    * applicationsurl - My applications URL
    * loginapplyurl - Login and apply URL
    * sharelinks - Social sharing links

    Example context (json):
    {
        "vacancy": {"id": 1, "title": "Developer", "code": "DEV-001"},
        "isloggedin": true,
        "canapply": true
    }
}}
<div class="jb-public-detail" data-region="jobboard-public-detail">
    {{! Back Button }}
    <nav class="jb-mb-4" aria-label="{{#str}}navigation, local_jobboard{{/str}}">
        <a href="{{backurl}}" class="jb-btn jb-btn-outline-secondary">
            <i class="fa fa-arrow-left jb-mr-2" aria-hidden="true"></i>
            {{#str}}backtovacancies, local_jobboard{{/str}}
        </a>
    </nav>

    {{! Two Column Layout }}
    <div class="jb-row">
        {{! Left Column - Main Content }}
        <main class="jb-col-lg-8">
            {{! Vacancy Header Card }}
            <article class="jb-card jb-shadow-sm jb-mb-4" aria-labelledby="vacancy-detail-title">
                <div class="jb-card-header jb-d-flex jb-justify-content-between jb-align-items-center jb-bg-primary jb-text-white">
                    <span class="jb-badge jb-badge-light" aria-label="{{#str}}vacancycode, local_jobboard{{/str}}: {{vacancy.code}}">{{vacancy.code}}</span>
                    <span class="jb-badge jb-badge-{{vacancy.publicationtypecolor}}">
                        {{vacancy.publicationtypelabel}}
                    </span>
                </div>

                <div class="jb-card-body">
                    <h1 class="jb-card-title jb-fs-2 jb-mb-3" id="vacancy-detail-title">{{vacancy.title}}</h1>

                    {{! Convocatoria Info }}
                    {{#convocatoria}}
                    <div class="jb-mb-3">
                        <i class="fa fa-folder-open jb-text-muted jb-mr-2" aria-hidden="true"></i>
                        {{#str}}convocatoria, local_jobboard{{/str}}:
                        <strong>{{name}}</strong>
                    </div>
                    {{/convocatoria}}

                    {{! Quick Details }}
                    <div class="jb-mb-3 jb-vacancy-badges" role="list" aria-label="{{#str}}vacancydetails, local_jobboard{{/str}}">
                        {{#vacancy.location}}
                        <span class="jb-badge jb-badge-light jb-mr-2 jb-mb-1" role="listitem">
                            <i class="fa fa-map-marker-alt jb-mr-1" aria-hidden="true"></i>
                            <span class="jb-sr-only">{{#str}}location, local_jobboard{{/str}}:</span>
                            {{vacancy.location}}
                        </span>
                        {{/vacancy.location}}

                        {{#vacancy.contracttypelabel}}
                        <span class="jb-badge jb-badge-light jb-mr-2 jb-mb-1" role="listitem">
                            <i class="fa fa-briefcase jb-mr-1" aria-hidden="true"></i>
                            <span class="jb-sr-only">{{#str}}contracttype, local_jobboard{{/str}}:</span>
                            {{vacancy.contracttypelabel}}
                        </span>
                        {{/vacancy.contracttypelabel}}

                        <span class="jb-badge jb-badge-light jb-mb-1" role="listitem">
                            <i class="fa fa-users jb-mr-1" aria-hidden="true"></i>
                            {{#str}}positions, local_jobboard{{/str}}: {{vacancy.positions}}
                        </span>
                    </div>

                    {{! Urgent Warning }}
                    {{#vacancy.isurgent}}
                    <div class="jb-alert jb-alert-warning" role="alert">
                        <i class="fa fa-exclamation-triangle jb-mr-2" aria-hidden="true"></i>
                        <strong>{{#str}}urgent, local_jobboard{{/str}}:</strong>
                        {{#str}}closesin, local_jobboard, {{vacancy.daysremaining}}{{/str}}
                    </div>
                    {{/vacancy.isurgent}}
                </div>
            </article>

            {{! Description Card }}
            {{#vacancy.description}}
            <section class="jb-card jb-shadow-sm jb-mb-4" aria-labelledby="description-heading">
                <div class="jb-card-header jb-bg-white jb-fw-bold">
                    <h2 class="jb-fs-5 jb-mb-0" id="description-heading">
                        <i class="fa fa-file-alt jb-mr-2" aria-hidden="true"></i>
                        {{#str}}vacancydescription, local_jobboard{{/str}}
                    </h2>
                </div>
                <div class="jb-card-body jb-content-area">
                    {{{vacancy.description}}}
                </div>
            </section>
            {{/vacancy.description}}

            {{! Requirements Card }}
            {{#vacancy.requirements}}
            <section class="jb-card jb-shadow-sm jb-mb-4" aria-labelledby="requirements-heading">
                <div class="jb-card-header jb-bg-white jb-fw-bold">
                    <h2 class="jb-fs-5 jb-mb-0" id="requirements-heading">
                        <i class="fa fa-check-circle jb-mr-2" aria-hidden="true"></i>
                        {{#str}}requirements, local_jobboard{{/str}}
                    </h2>
                </div>
                <div class="jb-card-body jb-content-area">
                    {{{vacancy.requirements}}}
                </div>
            </section>
            {{/vacancy.requirements}}

            {{! Desirable Card }}
            {{#vacancy.desirable}}
            <section class="jb-card jb-shadow-sm jb-mb-4" aria-labelledby="desirable-heading">
                <div class="jb-card-header jb-bg-white jb-fw-bold">
                    <h2 class="jb-fs-5 jb-mb-0" id="desirable-heading">
                        <i class="fa fa-star jb-mr-2" aria-hidden="true"></i>
                        {{#str}}desirable, local_jobboard{{/str}}
                    </h2>
                </div>
                <div class="jb-card-body jb-content-area">
                    {{{vacancy.desirable}}}
                </div>
            </section>
            {{/vacancy.desirable}}
        </main>

        {{! Right Column - Sidebar }}
        <aside class="jb-col-lg-4">
            {{! Apply CTA Card }}
            <section class="jb-card jb-shadow-sm jb-mb-4 jb-border-primary" aria-labelledby="apply-cta-heading">
                <div class="jb-card-header jb-bg-primary jb-text-white jb-fw-bold">
                    <h2 class="jb-fs-5 jb-mb-0" id="apply-cta-heading">
                        <i class="fa fa-paper-plane jb-mr-2" aria-hidden="true"></i>
                        {{#str}}readytoapply, local_jobboard{{/str}}
                    </h2>
                </div>
                <div class="jb-card-body jb-text-center">
                    {{#isloggedin}}
                        {{#hasapplied}}
                        <div class="jb-text-success" role="status">
                            <i class="fa fa-check-circle fa-2x jb-mb-2" aria-hidden="true"></i>
                            <p class="jb-mb-3">{{#str}}alreadyapplied, local_jobboard{{/str}}</p>
                        </div>
                        <a href="{{applicationsurl}}" class="jb-btn jb-btn-outline-primary jb-btn-block">
                            {{#str}}viewmyapplications, local_jobboard{{/str}}
                        </a>
                        {{/hasapplied}}

                        {{^hasapplied}}
                            {{#canapply}}
                            <p class="jb-text-muted jb-mb-3">{{#str}}applynowdesc, local_jobboard{{/str}}</p>
                            <a href="{{applyurl}}" class="jb-btn jb-btn-primary jb-btn-lg jb-btn-block" aria-label="{{#str}}applyto, local_jobboard{{/str}}: {{vacancy.title}}">
                                <i class="fa fa-paper-plane jb-mr-2" aria-hidden="true"></i>
                                {{#str}}apply, local_jobboard{{/str}}
                            </a>
                            {{/canapply}}

                            {{^canapply}}
                            <p class="jb-text-muted">{{#str}}cannotapply, local_jobboard{{/str}}</p>
                            {{/canapply}}
                        {{/hasapplied}}
                    {{/isloggedin}}

                    {{^isloggedin}}
                    <p class="jb-text-muted jb-mb-3">{{#str}}logintoapply, local_jobboard{{/str}}</p>
                    <a href="{{loginapplyurl}}" class="jb-btn jb-btn-primary jb-btn-lg jb-btn-block" target="_blank" rel="noopener noreferrer">
                        <i class="fa fa-sign-in-alt jb-mr-2" aria-hidden="true"></i>
                        {{#str}}loginandapply, local_jobboard{{/str}}
                        <span class="jb-sr-only">{{#str}}opensnewwindow, local_jobboard{{/str}}</span>
                    </a>
                    {{/isloggedin}}
                </div>
            </section>

            {{! Details Card }}
            <section class="jb-card jb-shadow-sm jb-mb-4" aria-labelledby="details-heading">
                <div class="jb-card-header jb-bg-white jb-fw-bold">
                    <h2 class="jb-fs-5 jb-mb-0" id="details-heading">
                        <i class="fa fa-info-circle jb-mr-2" aria-hidden="true"></i>
                        {{#str}}details, local_jobboard{{/str}}
                    </h2>
                </div>
                <div class="jb-card-body">
                    <dl class="jb-mb-0 jb-definition-list">
                        {{#vacancy.duration}}
                        <dt class="jb-text-muted jb-fs-sm">{{#str}}duration, local_jobboard{{/str}}</dt>
                        <dd class="jb-mb-2">{{vacancy.duration}}</dd>
                        {{/vacancy.duration}}

                        {{! Salary field removed in Phase 10 }}

                        {{#vacancy.department}}
                        <dt class="jb-text-muted jb-fs-sm">{{#str}}department, local_jobboard{{/str}}</dt>
                        <dd class="jb-mb-2">{{vacancy.department}}</dd>
                        {{/vacancy.department}}

                        <dt class="jb-text-muted jb-fs-sm">{{#str}}opendate, local_jobboard{{/str}}</dt>
                        <dd class="jb-mb-2">{{vacancy.opendateformatted}}</dd>

                        <dt class="jb-text-muted jb-fs-sm">{{#str}}closedate, local_jobboard{{/str}}</dt>
                        <dd class="jb-mb-0 {{#vacancy.isurgent}}jb-text-warning jb-fw-bold{{/vacancy.isurgent}}">
                            {{vacancy.closedateformatted}}
                        </dd>
                    </dl>
                </div>
            </section>

            {{! Share Card }}
            <section class="jb-card jb-shadow-sm jb-mb-4" aria-labelledby="share-heading">
                <div class="jb-card-header jb-bg-white jb-fw-bold">
                    <h2 class="jb-fs-5 jb-mb-0" id="share-heading">
                        <i class="fa fa-share-alt jb-mr-2" aria-hidden="true"></i>
                        {{#str}}share, local_jobboard{{/str}}
                    </h2>
                </div>
                <div class="jb-card-body">
                    <div class="jb-d-flex jb-justify-content-center jb-share-buttons" role="group" aria-label="{{#str}}sharethisvacancy, local_jobboard{{/str}}">
                        <a href="{{sharelinks.linkedin}}" class="jb-btn jb-btn-outline-primary jb-btn-lg jb-mx-1" target="_blank" rel="noopener noreferrer" aria-label="{{#str}}shareonlinkedin, local_jobboard{{/str}}">
                            <i class="fa fa-linkedin" aria-hidden="true"></i>
                            <span class="jb-sr-only">LinkedIn</span>
                        </a>
                        <a href="{{sharelinks.facebook}}" class="jb-btn jb-btn-outline-primary jb-btn-lg jb-mx-1" target="_blank" rel="noopener noreferrer" aria-label="{{#str}}shareonfacebook, local_jobboard{{/str}}">
                            <i class="fa fa-facebook" aria-hidden="true"></i>
                            <span class="jb-sr-only">Facebook</span>
                        </a>
                        <a href="{{sharelinks.twitter}}" class="jb-btn jb-btn-outline-primary jb-btn-lg jb-mx-1" target="_blank" rel="noopener noreferrer" aria-label="{{#str}}shareontwitter, local_jobboard{{/str}}">
                            <i class="fa fa-twitter" aria-hidden="true"></i>
                            <span class="jb-sr-only">Twitter</span>
                        </a>
                    </div>
                </div>
            </section>
        </aside>
    </div>
</div>
