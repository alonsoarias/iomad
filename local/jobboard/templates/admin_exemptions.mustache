{{!
    @template local_jobboard/admin_exemptions

    Admin exemptions management template.

    Context variables:
    * exemptions - Exemptions array
    * hasexemptions - Boolean
    * count - Total count
    * pagination - Pagination HTML
    * createurl - URL to create new exemption
}}
<div class="jb-admin-exemptions">
    {{> local_jobboard/admin_tabs }}

    <div class="jb-d-flex jb-justify-content-between jb-align-items-center jb-mb-4">
        <h4>{{#str}}exemptions, local_jobboard{{/str}}</h4>
        <a href="{{createurl}}" class="jb-btn jb-btn-primary">
            <i class="fa fa-plus jb-mr-1" aria-hidden="true"></i>
            {{#str}}createexemption, local_jobboard{{/str}}
        </a>
    </div>

    {{#hasexemptions}}
    <div class="jb-card">
        <div class="jb-table-responsive">
            <table class="jb-table jb-table-hover jb-mb-0">
                <thead class="jb-thead-light">
                    <tr>
                        <th>{{#str}}user, local_jobboard{{/str}}</th>
                        <th>{{#str}}documenttype, local_jobboard{{/str}}</th>
                        <th>{{#str}}reason, local_jobboard{{/str}}</th>
                        <th>{{#str}}grantedby, local_jobboard{{/str}}</th>
                        <th>{{#str}}expiry, local_jobboard{{/str}}</th>
                        <th>{{#str}}actions, local_jobboard{{/str}}</th>
                    </tr>
                </thead>
                <tbody>
                    {{#exemptions}}
                    <tr{{#isexpired}} class="jb-table-warning"{{/isexpired}}>
                        <td>{{username}}</td>
                        <td>{{doctypename}}</td>
                        <td>
                            <span title="{{reason}}">{{reason}}</span>
                        </td>
                        <td>
                            {{grantedby}}<br>
                            <small class="jb-text-muted">{{timegranted}}</small>
                        </td>
                        <td>
                            {{#hasexpiry}}
                            {{expirydate}}
                            {{#isexpired}}
                            <span class="jb-badge jb-badge-danger">{{#str}}expired, local_jobboard{{/str}}</span>
                            {{/isexpired}}
                            {{/hasexpiry}}
                            {{^hasexpiry}}
                            <span class="jb-text-muted">{{#str}}noexpiry, local_jobboard{{/str}}</span>
                            {{/hasexpiry}}
                        </td>
                        <td>
                            <div class="jb-btn-group jb-btn-group-sm">
                                <a href="{{viewurl}}" class="jb-btn jb-btn-outline-primary" title="{{#str}}view, local_jobboard{{/str}}">
                                    <i class="fa fa-eye" aria-hidden="true"></i>
                                </a>
                                <a href="{{revokeurl}}" class="jb-btn jb-btn-outline-danger" title="{{#str}}revoke, local_jobboard{{/str}}" data-confirm="{{#str}}confirmrevokeexemption, local_jobboard{{/str}}">
                                    <i class="fa fa-ban" aria-hidden="true"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                    {{/exemptions}}
                </tbody>
            </table>
        </div>
    </div>
    {{{pagination}}}
    {{/hasexemptions}}
    {{^hasexemptions}}
    {{> local_jobboard/components/empty_state }}
    {{/hasexemptions}}
</div>
