{{!
    @template local_jobboard/vacancy_detail

    Vacancy detail page template.

    Context variables:
    * id - Vacancy ID
    * code - Vacancy code
    * title - Vacancy title
    * description - Full description (HTML)
    * requirements - Requirements (HTML)
    * responsibilities - Responsibilities (HTML)
    * benefits - Benefits (HTML)
    * contracttype - Contract type
    * location - Location
    * department - Department
    * positions - Number of positions
    * salary - Salary range
    * closedate - Close date formatted
    * daysremaining - Days remaining
    * status - Status
    * statusclass - Status CSS class
    * convocatoria - Convocatoria info object
    * hasconvocatoria - Boolean
    * canapply - Can user apply
    * applyurl - Apply URL
    * canedit - Can user edit
    * editurl - Edit URL
    * backurl - Back URL
}}
<div class="jb-vacancy-detail" data-vacancy-id="{{id}}">
    {{> local_jobboard/components/breadcrumbs }}

    <div class="jb-card jb-mb-4">
        <div class="jb-card-header jb-d-flex jb-justify-content-between jb-align-items-start">
            <div>
                <span class="jb-badge jb-badge-secondary jb-mr-2">{{code}}</span>
                <span class="jb-badge jb-badge-{{statusclass}}">{{#str}}status:{{status}}, local_jobboard{{/str}}</span>
            </div>
            <div class="jb-btn-group">
                {{#canedit}}
                <a href="{{editurl}}" class="jb-btn jb-btn-sm jb-btn-outline-secondary">
                    <i class="fa fa-edit jb-mr-1" aria-hidden="true"></i>
                    {{#str}}edit, local_jobboard{{/str}}
                </a>
                {{/canedit}}
                {{#canapply}}
                <a href="{{applyurl}}" class="jb-btn jb-btn-sm jb-btn-primary">
                    <i class="fa fa-paper-plane jb-mr-1" aria-hidden="true"></i>
                    {{#str}}applynow, local_jobboard{{/str}}
                </a>
                {{/canapply}}
            </div>
        </div>
        <div class="jb-card-body">
            <h2 class="jb-card-title jb-mb-3">{{title}}</h2>

            <div class="jb-row jb-mb-4">
                <div class="jb-col-md-3 jb-col-6 jb-mb-2">
                    <small class="jb-text-muted jb-d-block">{{#str}}contracttype, local_jobboard{{/str}}</small>
                    <strong>{{contracttype}}</strong>
                </div>
                <div class="jb-col-md-3 jb-col-6 jb-mb-2">
                    <small class="jb-text-muted jb-d-block">{{#str}}location, local_jobboard{{/str}}</small>
                    <strong>{{location}}</strong>
                </div>
                <div class="jb-col-md-3 jb-col-6 jb-mb-2">
                    <small class="jb-text-muted jb-d-block">{{#str}}department, local_jobboard{{/str}}</small>
                    <strong>{{department}}</strong>
                </div>
                <div class="jb-col-md-3 jb-col-6 jb-mb-2">
                    <small class="jb-text-muted jb-d-block">{{#str}}positions, local_jobboard{{/str}}</small>
                    <strong>{{positions}}</strong>
                </div>
            </div>

            {{#salary}}
            <div class="jb-mb-3">
                <small class="jb-text-muted jb-d-block">{{#str}}salary, local_jobboard{{/str}}</small>
                <strong>{{salary}}</strong>
            </div>
            {{/salary}}

            <div class="jb-alert jb-alert-info jb-mb-4">
                <i class="fa fa-calendar jb-mr-2" aria-hidden="true"></i>
                {{#str}}closedate, local_jobboard{{/str}}: <strong>{{closedate}}</strong>
                {{#daysremaining}}
                <span class="jb-badge jb-badge-{{#urgent}}danger{{/urgent}}{{^urgent}}info{{/urgent}} jb-ml-2">
                    {{daysremaining}} {{#str}}daysremaining, local_jobboard{{/str}}
                </span>
                {{/daysremaining}}
            </div>

            {{#hasconvocatoria}}
            <div class="jb-alert jb-alert-secondary jb-mb-4">
                <strong>{{#str}}convocatoria, local_jobboard{{/str}}:</strong>
                <a href="{{convocatoria.url}}">{{convocatoria.code}} - {{convocatoria.name}}</a>
            </div>
            {{/hasconvocatoria}}
        </div>
    </div>

    <div class="jb-row">
        <div class="jb-col-lg-8">
            {{#description}}
            <div class="jb-card jb-mb-4">
                <div class="jb-card-header">
                    <h5 class="jb-mb-0">{{#str}}description, local_jobboard{{/str}}</h5>
                </div>
                <div class="jb-card-body jb-vacancy-description">
                    {{{description}}}
                </div>
            </div>
            {{/description}}

            {{#requirements}}
            <div class="jb-card jb-mb-4">
                <div class="jb-card-header">
                    <h5 class="jb-mb-0">{{#str}}requirements, local_jobboard{{/str}}</h5>
                </div>
                <div class="jb-card-body jb-vacancy-requirements">
                    {{{requirements}}}
                </div>
            </div>
            {{/requirements}}

            {{#responsibilities}}
            <div class="jb-card jb-mb-4">
                <div class="jb-card-header">
                    <h5 class="jb-mb-0">{{#str}}responsibilities, local_jobboard{{/str}}</h5>
                </div>
                <div class="jb-card-body jb-vacancy-responsibilities">
                    {{{responsibilities}}}
                </div>
            </div>
            {{/responsibilities}}

            {{#benefits}}
            <div class="jb-card jb-mb-4">
                <div class="jb-card-header">
                    <h5 class="jb-mb-0">{{#str}}benefits, local_jobboard{{/str}}</h5>
                </div>
                <div class="jb-card-body jb-vacancy-benefits">
                    {{{benefits}}}
                </div>
            </div>
            {{/benefits}}
        </div>

        <div class="jb-col-lg-4">
            <div class="jb-card jb-card-sticky">
                <div class="jb-card-header">
                    <h5 class="jb-mb-0">{{#str}}applyforvacancy, local_jobboard{{/str}}</h5>
                </div>
                <div class="jb-card-body jb-text-center">
                    {{#canapply}}
                    <p class="jb-mb-3">{{#str}}interestedinposition, local_jobboard{{/str}}</p>
                    <a href="{{applyurl}}" class="jb-btn jb-btn-lg jb-btn-primary jb-btn-block">
                        <i class="fa fa-paper-plane jb-mr-2" aria-hidden="true"></i>
                        {{#str}}applynow, local_jobboard{{/str}}
                    </a>
                    {{/canapply}}
                    {{^canapply}}
                    <p class="jb-text-muted">{{#str}}cannotapply, local_jobboard{{/str}}</p>
                    {{/canapply}}
                </div>
            </div>

            {{> local_jobboard/share_buttons }}
        </div>
    </div>

    <div class="jb-mt-4">
        <a href="{{backurl}}" class="jb-btn jb-btn-outline-secondary">
            <i class="fa fa-arrow-left jb-mr-1" aria-hidden="true"></i>
            {{#str}}backtovacancies, local_jobboard{{/str}}
        </a>
    </div>
</div>
