{{!
    @template local_jobboard/dashboard

    Main dashboard template.

    Context variables required for this template:
    * widgets - Array of dashboard widgets
    * recentactivity - Array of recent activity items
    * alerts - Array of alert items
    * canmanage - Boolean if user can manage vacancies

    Example context (json):
    {
        "widgets": [],
        "recentactivity": [],
        "alerts": [],
        "canmanage": true
    }
}}
<div class="jobboard-dashboard" data-region="dashboard">
    <div class="jb-row jb-mb-4">
        <div class="jb-col-12">
            <h2>{{#str}}dashboard, local_jobboard{{/str}}</h2>
        </div>
    </div>

    {{! Statistics Widgets }}
    <div class="jb-row jb-mb-4">
        {{#widgets}}
            <div class="jb-col-md-6 jb-col-lg-3 jb-mb-3">
                {{> local_jobboard/dashboard_widget}}
            </div>
        {{/widgets}}
    </div>

    <div class="jb-row">
        {{! Recent Activity }}
        <div class="jb-col-lg-8 jb-mb-4">
            <div class="jb-card jb-h-100 jb-card-shadow">
                <div class="jb-card-header">
                    <h5 class="jb-mb-0">{{#str}}recentactivity, local_jobboard{{/str}}</h5>
                </div>
                <div class="jb-card-body">
                    {{#hasrecentactivity}}
                        <ul class="jb-list-group jb-list-group-flush">
                            {{#recentactivity}}
                                <li class="jb-list-group-item jb-d-flex jb-justify-content-between jb-align-items-start">
                                    <div>
                                        <span class="jb-badge jb-badge-{{typeclass}} jb-mr-2">{{typelabel}}</span>
                                        {{{message}}}
                                    </div>
                                    <small class="jb-text-muted">{{timeago}}</small>
                                </li>
                            {{/recentactivity}}
                        </ul>
                    {{/hasrecentactivity}}
                    {{^hasrecentactivity}}
                        <p class="jb-text-muted jb-mb-0">{{#str}}noresults, local_jobboard{{/str}}</p>
                    {{/hasrecentactivity}}
                </div>
            </div>
        </div>

        {{! Alerts and Quick Actions }}
        <div class="jb-col-lg-4 jb-mb-4">
            {{#hasalerts}}
                <div class="jb-card jb-mb-3 jb-card-shadow">
                    <div class="jb-card-header jb-bg-warning jb-text-dark">
                        <h5 class="jb-mb-0">{{#str}}alerts, local_jobboard{{/str}}</h5>
                    </div>
                    <ul class="jb-list-group jb-list-group-flush">
                        {{#alerts}}
                            <li class="jb-list-group-item jb-list-group-item-{{alertclass}}">
                                {{#pix}}i/warning, core{{/pix}}
                                {{{message}}}
                            </li>
                        {{/alerts}}
                    </ul>
                </div>
            {{/hasalerts}}

            {{#canmanage}}
                <div class="jb-card jb-card-shadow">
                    <div class="jb-card-header">
                        <h5 class="jb-mb-0">{{#str}}quickactions, local_jobboard{{/str}}</h5>
                    </div>
                    <div class="jb-card-body">
                        <div class="jb-d-grid jb-gap-2">
                            <a href="{{createvacancyurl}}" class="jb-btn jb-btn-primary jb-btn-block jb-mb-2">
                                {{#pix}}i/addblock, core{{/pix}}
                                {{#str}}newvacancy, local_jobboard{{/str}}
                            </a>
                            <a href="{{manageapplicationsurl}}" class="jb-btn jb-btn-outline-primary jb-btn-block jb-mb-2">
                                {{#pix}}i/grades, core{{/pix}}
                                {{#str}}reviewapplications, local_jobboard{{/str}}
                            </a>
                            <a href="{{reportsurl}}" class="jb-btn jb-btn-outline-secondary jb-btn-block">
                                {{#pix}}i/report, core{{/pix}}
                                {{#str}}reports, local_jobboard{{/str}}
                            </a>
                        </div>
                    </div>
                </div>
            {{/canmanage}}
        </div>
    </div>
</div>
