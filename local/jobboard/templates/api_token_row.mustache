{{!
    @template local_jobboard/api_token_row

    API token table row template.

    Context variables required for this template:
    * id - Token ID
    * description - Token description
    * maskedtoken - First/last few chars of token (masked)
    * permissions - Array of permission labels
    * status - Token status (active, disabled, expired)
    * statusclass - CSS class for status badge
    * statuslabel - Localized status label
    * lastused - Formatted last used date or "Never"
    * timecreated - Formatted creation date
    * canrevoke - Boolean if can revoke
    * candelete - Boolean if can delete

    Example context (json):
    {
        "id": 1,
        "description": "Production API",
        "maskedtoken": "abc1...xyz9",
        "permissions": ["View vacancies", "Create applications"],
        "status": "active",
        "statusclass": "success",
        "statuslabel": "Active",
        "lastused": "15 Jan 2024",
        "timecreated": "01 Jan 2024",
        "canrevoke": true,
        "candelete": true
    }
}}
<tr data-token-id="{{id}}" class="token-row">
    <td>
        <code class="text-muted">{{maskedtoken}}</code>
    </td>
    <td>
        <strong>{{description}}</strong>
    </td>
    <td>
        {{#permissions}}
            <span class="badge badge-light mr-1">{{.}}</span>
        {{/permissions}}
    </td>
    <td>
        <span class="badge badge-{{statusclass}}">{{statuslabel}}</span>
    </td>
    <td>{{lastused}}</td>
    <td>{{timecreated}}</td>
    <td class="text-right">
        {{#canrevoke}}
            {{#enabled}}
                <button type="button" 
                        class="btn btn-sm btn-outline-warning token-action" 
                        data-action="revoke" 
                        data-token-id="{{id}}"
                        title="{{#str}}api:token:revoke, local_jobboard{{/str}}">
                    {{#pix}}i/hide, core{{/pix}}
                </button>
            {{/enabled}}
            {{^enabled}}
                <button type="button" 
                        class="btn btn-sm btn-outline-success token-action" 
                        data-action="enable" 
                        data-token-id="{{id}}"
                        title="{{#str}}api:token:enable, local_jobboard{{/str}}">
                    {{#pix}}i/show, core{{/pix}}
                </button>
            {{/enabled}}
        {{/canrevoke}}
        {{#candelete}}
            <button type="button" 
                    class="btn btn-sm btn-outline-danger token-action" 
                    data-action="delete" 
                    data-token-id="{{id}}"
                    title="{{#str}}api:token:delete, local_jobboard{{/str}}">
                {{#pix}}i/trash, core{{/pix}}
            </button>
        {{/candelete}}
    </td>
</tr>
