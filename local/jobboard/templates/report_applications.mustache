{{!
    @template local_jobboard/report_applications

    Applications report template.

    Context variables:
    * title - Report title
    * description - Report description
    * filters - Filter form HTML
    * stats - Summary statistics
    * applications - Array of application data
    * hasapplications - Boolean
    * columns - Table column definitions
    * exportbuttons - Export buttons HTML
    * pagination - Pagination HTML
}}
<div class="jb-report jb-report-applications">
    <div class="jb-card jb-mb-4">
        <div class="jb-card-header jb-d-flex jb-justify-content-between jb-align-items-center">
            <h4 class="jb-mb-0">{{title}}</h4>
            {{{exportbuttons}}}
        </div>
        <div class="jb-card-body">
            {{#description}}
            <p class="jb-text-muted jb-mb-4">{{description}}</p>
            {{/description}}

            {{{filters}}}

            {{#stats}}
            <div class="jb-row jb-mb-4">
                {{#items}}
                <div class="jb-col-md-3 jb-col-sm-6 jb-mb-2">
                    <div class="jb-stat-card jb-p-3 jb-bg-light jb-rounded">
                        <div class="jb-stat-value jb-h4 jb-mb-0">{{value}}</div>
                        <div class="jb-stat-label jb-text-muted jb-small">{{label}}</div>
                    </div>
                </div>
                {{/items}}
            </div>
            {{/stats}}

            {{#hasapplications}}
            <div class="jb-table-responsive">
                <table class="jb-table jb-table-striped jb-table-hover">
                    <thead>
                        <tr>
                            {{#columns}}
                            <th{{#sortable}} class="jb-sortable"{{/sortable}}>
                                {{label}}
                                {{#sortable}}
                                <i class="fa fa-sort jb-text-muted" aria-hidden="true"></i>
                                {{/sortable}}
                            </th>
                            {{/columns}}
                        </tr>
                    </thead>
                    <tbody>
                        {{#applications}}
                        <tr>
                            <td>{{id}}</td>
                            <td>
                                <a href="{{applicanturl}}">{{applicantname}}</a>
                            </td>
                            <td>
                                <a href="{{vacancyurl}}">{{vacancytitle}}</a>
                                <br><small class="jb-text-muted">{{vacancycode}}</small>
                            </td>
                            <td>
                                <span class="jb-badge jb-badge-{{statuscolor}}">{{statuslabel}}</span>
                            </td>
                            <td>{{dateapplied}}</td>
                            <td>
                                {{#documentcount}}
                                <span class="jb-badge jb-badge-secondary">{{documentcount}}</span>
                                {{/documentcount}}
                            </td>
                            <td>
                                <a href="{{viewurl}}" class="jb-btn jb-btn-sm jb-btn-outline-primary">
                                    <i class="fa fa-eye" aria-hidden="true"></i>
                                </a>
                            </td>
                        </tr>
                        {{/applications}}
                    </tbody>
                </table>
            </div>
            {{{pagination}}}
            {{/hasapplications}}
            {{^hasapplications}}
            <div class="jb-text-center jb-py-5">
                <i class="fa fa-file-text-o fa-3x jb-text-muted jb-mb-3" aria-hidden="true"></i>
                <p class="jb-text-muted">{{#str}}noapplicationsreport, local_jobboard{{/str}}</p>
            </div>
            {{/hasapplications}}
        </div>
    </div>
</div>
