{{!
    @template local_jobboard/components/filter_form

    Filter form component for list views.

    Context variables:
    * action - Form action URL
    * method - Form method (get/post), defaults to get
    * hiddenfields - Array of hidden fields [{name, value}]
    * fields - Array of filter fields with:
        - type: text, select, date
        - name: field name
        - label: optional label
        - placeholder: optional placeholder
        - value: current value
        - options: for select [{value, label, selected}]
        - col: column class (jb-col-md-3)
    * showreset - Boolean to show reset button
    * reseturl - URL for reset

    Example context (json):
    {
        "action": "/search",
        "hiddenfields": [{"name": "view", "value": "vacancies"}],
        "fields": [
            {"type": "text", "name": "search", "placeholder": "Search...", "col": "jb-col-md-4"},
            {"type": "select", "name": "status", "options": [{"value": "", "label": "All"}], "col": "jb-col-md-3"}
        ],
        "showreset": true,
        "reseturl": "/vacancies"
    }
}}
<div class="jb-filter-form" role="search">
    <form action="{{action}}" method="{{#method}}{{method}}{{/method}}{{^method}}get{{/method}}" class="jb-mb-0" aria-label="{{#str}}filterform, local_jobboard{{/str}}">
        {{#hiddenfields}}
        <input type="hidden" name="{{name}}" value="{{value}}">
        {{/hiddenfields}}

        <div class="jb-filter-row">
            {{#fields}}
            <div class="jb-filter-group {{#col}}{{col}}{{/col}}{{^col}}jb-col-md-3{{/col}}">
                {{#label}}
                <label for="filter_{{name}}" class="jb-form-label jb-small jb-text-muted jb-mb-1">{{label}}</label>
                {{/label}}
                {{^label}}
                <label for="filter_{{name}}" class="jb-sr-only">{{placeholder}}</label>
                {{/label}}

                {{#isText}}
                <input type="text"
                       id="filter_{{name}}"
                       name="{{name}}"
                       class="jb-form-control jb-form-control-sm"
                       placeholder="{{placeholder}}"
                       value="{{value}}"
                       aria-label="{{#label}}{{label}}{{/label}}{{^label}}{{placeholder}}{{/label}}">
                {{/isText}}

                {{#isSelect}}
                <select id="filter_{{name}}"
                        name="{{name}}"
                        class="jb-form-select jb-form-control-sm"
                        aria-label="{{#label}}{{label}}{{/label}}{{^label}}{{#str}}select, local_jobboard{{/str}}{{/label}}">
                    {{#options}}
                    <option value="{{value}}" {{#selected}}selected{{/selected}}>{{label}}</option>
                    {{/options}}
                </select>
                {{/isSelect}}

                {{#isDate}}
                <input type="date"
                       id="filter_{{name}}"
                       name="{{name}}"
                       class="jb-form-control jb-form-control-sm"
                       value="{{value}}"
                       aria-label="{{#label}}{{label}}{{/label}}{{^label}}{{#str}}date, local_jobboard{{/str}}{{/label}}">
                {{/isDate}}
            </div>
            {{/fields}}

            <div class="jb-filter-actions">
                <button type="submit" class="jb-btn jb-btn-primary jb-btn-sm">
                    <i class="fa fa-search jb-mr-1" aria-hidden="true"></i>
                    {{#str}}search{{/str}}
                </button>
                {{#showreset}}
                <a href="{{reseturl}}" class="jb-btn jb-btn-outline-secondary jb-btn-sm" aria-label="{{#str}}resetfilters, local_jobboard{{/str}}">
                    <i class="fa fa-times jb-mr-1" aria-hidden="true"></i>
                    {{#str}}reset{{/str}}
                </a>
                {{/showreset}}
            </div>
        </div>
    </form>
</div>
