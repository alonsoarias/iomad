/**
 * Vacancy form AMD module for local_jobboard.
 *
 * Handles dynamic loading of departments based on company selection.
 *
 * @module     local_jobboard/vacancy_form
 * @copyright  2024 ISER
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_jobboard/vacancy_form",["jquery","core/ajax","core/notification","core/str"],(function($,Ajax,Notification,Str){return{init:function(){var companySelect=$("#id_companyid"),departmentSelect=$("#id_departmentid");companySelect.length&&departmentSelect.length&&companySelect.on("change",(function(){var companyId=$(this).val();departmentSelect.prop("disabled",!0),companyId&&"0"!=companyId?Ajax.call([{methodname:"local_jobboard_get_departments",args:{companyid:parseInt(companyId,10)}}])[0].then((function(departments){return Str.get_string("selectdepartment","local_jobboard").then((function(str){departmentSelect.empty(),departmentSelect.append($("<option>",{value:0,text:str})),departments&&departments.length>0&&departments.forEach((function(dept){departmentSelect.append($("<option>",{value:dept.id,text:dept.name}))})),departmentSelect.prop("disabled",!1)}))})).catch((function(error){Notification.exception(error),departmentSelect.prop("disabled",!1)})):Str.get_string("selectdepartment","local_jobboard").then((function(str){departmentSelect.empty().append($("<option>",{value:0,text:str})),departmentSelect.prop("disabled",!1)})).catch(Notification.exception)}))}}}));

//# sourceMappingURL=vacancy_form.min.js.map