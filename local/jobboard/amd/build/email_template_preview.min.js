define(["jquery"],function($){"use strict";var sampleData={"{fullname}":"John Doe","{vacancy_code}":"VAC-2024-001","{vacancy_title}":"Full-time Mathematics Professor","{application_id}":"12345","{application_url}":"https://example.com/application/view?id=12345","{sitename}":"Job Board System","{rejected_docs}":"- Professional Certificate: Document illegible\n- Background Check: Document expired","{observations}":"Please ensure documents are clear and up to date.","{summary}":"Documents reviewed: 5\nApproved: 3\nRejected: 2","{action_required}":"Please reupload the rejected documents.","{interview_date}":"Monday, December 15, 2024 at 10:00 AM","{interview_location}":"Building A, Room 205","{interview_notes}":"Please bring a copy of your documents.","{notes}":"Additional information will be sent via email."};var replacePlaceholders=function(text){if(!text){return"";}var result=text;Object.keys(sampleData).forEach(function(key){var regex=new RegExp(key.replace(/[{}]/g,"\\$&"),"g");result=result.replace(regex,sampleData[key]);});return result;};var getSubject=function(){return $('input[name="subject"]').val()||"";};var getBody=function(){var editor=document.querySelector("#id_body_editoreditable");if(editor){return editor.innerHTML||"";}if(typeof window.tinyMCE!=="undefined"){var tinyEditor=window.tinyMCE.get("id_body_editor");if(tinyEditor){return tinyEditor.getContent();}}var textarea=document.querySelector("#id_body_editor");if(textarea){return textarea.value||"";}return"";};var escapeHtml=function(text){var div=document.createElement("div");div.textContent=text;return div.innerHTML;};var updatePreview=function(){var subject=getSubject();var body=getBody();var previewSubject=replacePlaceholders(subject);var previewBody=replacePlaceholders(body);var previewHtml='<div class="email-preview-card">';previewHtml+='<div class="email-preview-header bg-primary text-white p-2 rounded-top">';previewHtml+='<i class="fa fa-envelope mr-2"></i>Email Preview';previewHtml+="</div>";previewHtml+='<div class="email-preview-content border border-top-0 rounded-bottom p-3">';previewHtml+='<div class="email-preview-subject mb-3">';previewHtml+='<small class="text-muted d-block">Subject:</small>';previewHtml+="<strong>"+escapeHtml(previewSubject)+"</strong>";previewHtml+="</div>";previewHtml+="<hr>";previewHtml+='<div class="email-preview-body">';previewHtml+='<small class="text-muted d-block mb-2">Body:</small>';previewHtml+='<div class="bg-white p-3 border rounded">'+previewBody+"</div>";previewHtml+="</div>";previewHtml+="</div>";previewHtml+="</div>";$("#template-preview").html(previewHtml);};var init=function(config){config=config||{};$(document).ready(function(){setTimeout(updatePreview,1000);$('input[name="subject"]').on("input change",function(){updatePreview();});var attoEditor=document.querySelector("#id_body_editoreditable");if(attoEditor){var observer=new MutationObserver(function(){updatePreview();});observer.observe(attoEditor,{childList:true,subtree:true,characterData:true});}if(typeof window.tinyMCE!=="undefined"){var checkTinyMCE=setInterval(function(){var tinyEditor=window.tinyMCE.get("id_body_editor");if(tinyEditor){clearInterval(checkTinyMCE);tinyEditor.on("change input keyup",function(){updatePreview();});}},500);}$("#id_body_editor").on("input change",function(){updatePreview();});var previewHeader=$('[data-target="#id_previewheader"]').first();if(previewHeader.length){previewHeader.attr("aria-expanded","true");$("#id_previewheader").addClass("show");}setInterval(updatePreview,2000);});};return{init:init,updatePreview:updatePreview};});
//# sourceMappingURL=email_template_preview.min.js.map