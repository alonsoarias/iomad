{"version":3,"file":"checkbox_selectall.min.js","sources":["../src/checkbox_selectall.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * AMD module for \"Select All\" checkbox functionality.\n *\n * Provides reusable select all/none functionality for checkbox lists.\n * Used in bulk validation and reviewer assignment pages.\n *\n * @module     local_jobboard/checkbox_selectall\n * @copyright  2024 ISER\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery'], function($) {\n    'use strict';\n\n    /**\n     * Initialize select all checkbox handler.\n     *\n     * @param {Object} options Configuration options.\n     * @param {string} options.selectAllId ID of the select all checkbox (without #).\n     * @param {string} options.checkboxClass Class of target checkboxes (without .).\n     * @param {Function} options.onSelect Optional callback when selection changes.\n     */\n    var init = function(options) {\n        options = options || {};\n\n        var selectAllId = options.selectAllId || 'selectall';\n        var checkboxClass = options.checkboxClass || 'item-checkbox';\n        var onSelect = options.onSelect || null;\n\n        var $selectAll = $('#' + selectAllId);\n        var checkboxSelector = '.' + checkboxClass;\n\n        if (!$selectAll.length) {\n            return;\n        }\n\n        // Handle select all checkbox change.\n        $selectAll.on('change', function() {\n            var isChecked = $(this).prop('checked');\n            $(checkboxSelector).prop('checked', isChecked);\n\n            if (typeof onSelect === 'function') {\n                onSelect(getSelectedCount(checkboxSelector));\n            }\n        });\n\n        // Handle individual checkbox changes to update select all state.\n        $(document).on('change', checkboxSelector, function() {\n            updateSelectAllState($selectAll, checkboxSelector);\n\n            if (typeof onSelect === 'function') {\n                onSelect(getSelectedCount(checkboxSelector));\n            }\n        });\n\n        // Initialize state.\n        updateSelectAllState($selectAll, checkboxSelector);\n    };\n\n    /**\n     * Update the select all checkbox state based on individual checkboxes.\n     *\n     * @param {jQuery} $selectAll The select all checkbox element.\n     * @param {string} checkboxSelector Selector for target checkboxes.\n     */\n    var updateSelectAllState = function($selectAll, checkboxSelector) {\n        var $checkboxes = $(checkboxSelector);\n        var total = $checkboxes.length;\n        var checked = $checkboxes.filter(':checked').length;\n\n        if (total === 0) {\n            $selectAll.prop('checked', false);\n            $selectAll.prop('indeterminate', false);\n        } else if (checked === 0) {\n            $selectAll.prop('checked', false);\n            $selectAll.prop('indeterminate', false);\n        } else if (checked === total) {\n            $selectAll.prop('checked', true);\n            $selectAll.prop('indeterminate', false);\n        } else {\n            $selectAll.prop('checked', false);\n            $selectAll.prop('indeterminate', true);\n        }\n    };\n\n    /**\n     * Get the count of selected checkboxes.\n     *\n     * @param {string} checkboxSelector Selector for target checkboxes.\n     * @return {number} Number of selected checkboxes.\n     */\n    var getSelectedCount = function(checkboxSelector) {\n        return $(checkboxSelector).filter(':checked').length;\n    };\n\n    /**\n     * Get all selected checkbox values.\n     *\n     * @param {string} checkboxSelector Selector for target checkboxes.\n     * @return {Array} Array of selected checkbox values.\n     */\n    var getSelectedValues = function(checkboxSelector) {\n        var values = [];\n        $(checkboxSelector).filter(':checked').each(function() {\n            values.push($(this).val());\n        });\n        return values;\n    };\n\n    return {\n        init: init,\n        getSelectedCount: getSelectedCount,\n        getSelectedValues: getSelectedValues\n    };\n});\n"],"names":["define","$","updateSelectAllState","$selectAll","checkboxSelector","$checkboxes","total","length","checked","filter","prop","getSelectedCount","init","options","selectAllId","checkboxClass","onSelect","on","isChecked","this","document","getSelectedValues","values","each","push","val"],"mappings":";;;;;;;;;;AAyBAA,2CAAO,CAAC,WAAW,SAASC,OAsDpBC,qBAAuB,SAASC,WAAYC,sBACxCC,YAAcJ,EAAEG,kBAChBE,MAAQD,YAAYE,OACpBC,QAAUH,YAAYI,OAAO,YAAYF,OAE/B,IAAVD,OAGmB,IAAZE,SAFPL,WAAWO,KAAK,WAAW,GAC3BP,WAAWO,KAAK,iBAAiB,IAI1BF,UAAYF,OACnBH,WAAWO,KAAK,WAAW,GAC3BP,WAAWO,KAAK,iBAAiB,KAEjCP,WAAWO,KAAK,WAAW,GAC3BP,WAAWO,KAAK,iBAAiB,KAUrCC,iBAAmB,SAASP,yBACrBH,EAAEG,kBAAkBK,OAAO,YAAYF,cAiB3C,CACHK,KAxFO,SAASC,aAGZC,aAFJD,QAAUA,SAAW,IAEKC,aAAe,YACrCC,cAAgBF,QAAQE,eAAiB,gBACzCC,SAAWH,QAAQG,UAAY,KAE/Bb,WAAaF,EAAE,IAAMa,aACrBV,iBAAmB,IAAMW,cAExBZ,WAAWI,SAKhBJ,WAAWc,GAAG,UAAU,eAChBC,UAAYjB,EAAEkB,MAAMT,KAAK,WAC7BT,EAAEG,kBAAkBM,KAAK,UAAWQ,WAEZ,mBAAbF,UACPA,SAASL,iBAAiBP,sBAKlCH,EAAEmB,UAAUH,GAAG,SAAUb,kBAAkB,WACvCF,qBAAqBC,WAAYC,kBAET,mBAAbY,UACPA,SAASL,iBAAiBP,sBAKlCF,qBAAqBC,WAAYC,oBAuDjCO,iBAAkBA,iBAClBU,kBAXoB,SAASjB,sBACzBkB,OAAS,UACbrB,EAAEG,kBAAkBK,OAAO,YAAYc,MAAK,WACxCD,OAAOE,KAAKvB,EAAEkB,MAAMM,UAEjBH"}