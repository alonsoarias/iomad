/**
 * AMD module for signup form with dynamic company and department loading.
 *
 * @module     local_jobboard/signup_form
 * @copyright  2024 ISER
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define(["jquery","core/str","local_jobboard/department_loader","local_jobboard/company_loader"],(function(e,t,s,a){"use strict";return{init:function(i){i=i||{};var l=e("#id_companyid_signup");e("#id_departmentid_signup");l.length&&i.loadCompaniesAjax?a.init({companySelector:"#id_companyid_signup",departmentSelector:"#id_departmentid_signup",preselect:i.companyPreselect,departmentPreselect:i.preselect}):l.length&&s.init({companySelector:'#id_companyid_signup, select[name="companyid"]',departmentSelector:'#id_departmentid_signup, select[name="departmentid"]',preselect:i.preselect});var n=e("#id_password");if(n.length){var r=e("<div>",{class:"password-strength mt-1",id:"password-strength"});n.after(r),n.on("keyup",(function(){var t=e(this).val(),s=o(t);d(s)}))}var o=function(e){var t={score:0,level:"weak"};return e?(e.length>=8&&(t.score+=1),e.length>=12&&(t.score+=1),/[a-z]/.test(e)&&(t.score+=1),/[A-Z]/.test(e)&&(t.score+=1),/[0-9]/.test(e)&&(t.score+=1),/[^a-zA-Z0-9]/.test(e)&&(t.score+=1),t.score>=5?t.level="strong":t.score>=3?t.level="medium":t.level="weak",t):t},d=function(s){var a=e("#password-strength"),i={weak:"danger",medium:"warning",strong:"success"};t.get_string("password_strength_"+s.level,"local_jobboard").done((function(e){a.html('<small class="text-'+i[s.level]+'"><i class="fa fa-shield me-1"></i>'+e+"</small>")})).fail((function(){a.html('<small class="text-'+i[s.level]+'"><i class="fa fa-shield me-1"></i>'+s.level+"</small>")}))},c=e("#id_email"),m=e("#id_email2");c.length&&m.length&&m.on("blur",(function(){var s=c.val(),a=e(this).val();s&&a&&s!==a?(e(this).addClass("is-invalid"),t.get_string("emailnotmatch","local_jobboard").done(function(t){e(this).siblings(".invalid-feedback").length||e(this).after('<div class="invalid-feedback">'+t+"</div>")}.bind(this))):(e(this).removeClass("is-invalid"),e(this).siblings(".invalid-feedback").remove())}))}}}));
//# sourceMappingURL=signup_form.min.js.map