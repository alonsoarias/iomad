/**
 * AMD module for signup form with dynamic department loading.
 *
 * @module     local_jobboard/signup_form
 * @copyright  2024 ISER
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_jobboard/signup_form",["jquery","core/str","local_jobboard/department_loader"],(function($,Str,DepartmentLoader){return{init:function(options){options=options||{},DepartmentLoader.init({companySelector:'#id_companyid_signup, select[name="companyid"]',departmentSelector:'#id_departmentid_signup, select[name="departmentid"]',preselect:options.preselect});var passwordField=$("#id_password");if(passwordField.length){var strengthIndicator=$("<div>",{class:"password-strength mt-1",id:"password-strength"});passwordField.after(strengthIndicator),passwordField.on("keyup",(function(){var password=$(this).val(),strength=checkPasswordStrength(password);updateStrengthIndicator(strength)}))}var checkPasswordStrength=function(password){var strength={score:0,level:"weak"};return password?(password.length>=8&&(strength.score+=1),password.length>=12&&(strength.score+=1),/[a-z]/.test(password)&&(strength.score+=1),/[A-Z]/.test(password)&&(strength.score+=1),/[0-9]/.test(password)&&(strength.score+=1),/[^a-zA-Z0-9]/.test(password)&&(strength.score+=1),strength.score>=5?strength.level="strong":strength.score>=3?strength.level="medium":strength.level="weak",strength):strength},updateStrengthIndicator=function(strength){var indicator=$("#password-strength"),colors={weak:"danger",medium:"warning",strong:"success"};Str.get_string("password_strength_"+strength.level,"local_jobboard").done((function(str){indicator.html('<small class="text-'+colors[strength.level]+'"><i class="fa fa-shield me-1"></i>'+str+"</small>")})).fail((function(){indicator.html('<small class="text-'+colors[strength.level]+'"><i class="fa fa-shield me-1"></i>'+strength.level+"</small>")}))},emailField=$("#id_email"),email2Field=$("#id_email2");emailField.length&&email2Field.length&&email2Field.on("blur",(function(){var email1=emailField.val(),email2=$(this).val();email1&&email2&&email1!==email2?($(this).addClass("is-invalid"),Str.get_string("emailnotmatch","local_jobboard").done(function(str){$(this).siblings(".invalid-feedback").length||$(this).after('<div class="invalid-feedback">'+str+"</div>")}.bind(this))):($(this).removeClass("is-invalid"),$(this).siblings(".invalid-feedback").remove())}))}}}));

//# sourceMappingURL=signup_form.min.js.map