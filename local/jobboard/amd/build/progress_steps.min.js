/**
 * Progress steps indicator module for multi-step forms.
 *
 * @module     local_jobboard/progress_steps
 * @copyright  2024 ISER
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_jobboard/progress_steps",["jquery"],(function($){var ProgressSteps=function(config){this.config=$.extend({containerId:"jb-progress-container",steps:[],sectionMap:{},currentStep:0},config),this.$container=$("#"+this.config.containerId),this.init()};return ProgressSteps.prototype.init=function(){this.$container.length&&(this.renderSteps(),this.bindEvents(),this.updateStep(this.config.currentStep))},ProgressSteps.prototype.renderSteps=function(){var html='<div class="jb-progress-container">';html+='<ul class="jb-progress-steps" role="progressbar" aria-label="'+M.util.get_string("signup_progress","local_jobboard")+'">',this.config.steps.forEach(function(step,index){var stepClass="jb-step",ariaLabel=step.label;index<this.config.currentStep?(stepClass+=" completed",ariaLabel+=" - "+M.util.get_string("completedstep","local_jobboard")):index===this.config.currentStep?(stepClass+=" active",ariaLabel+=" - "+M.util.get_string("currentstep","local_jobboard")):ariaLabel+=" - "+M.util.get_string("pendingstep","local_jobboard"),html+='<li class="'+stepClass+'" data-step="'+index+'" aria-label="'+ariaLabel+'">',html+='<div class="jb-step-icon"><i class="fa fa-'+step.icon+'"></i></div>',html+='<span class="jb-step-label">'+step.label+"</span>",html+="</li>"}.bind(this)),html+="</ul></div>",this.$container.html(html)},ProgressSteps.prototype.bindEvents=function(){var self=this;Object.keys(this.config.sectionMap).forEach((function(sectionId){var $section=$("#id_"+sectionId);$section.length&&$section.on("click",(function(){var stepIndex=self.config.sectionMap[sectionId];self.updateStep(stepIndex)}))})),$("form.mform").on("change","input, select, textarea",(function(){self.checkSectionCompletion()}))},ProgressSteps.prototype.updateStep=function(stepIndex){this.config.currentStep=stepIndex,this.$container.find(".jb-step").each((function(index){var $step=$(this);$step.removeClass("active completed"),index<stepIndex?$step.addClass("completed"):index===stepIndex&&$step.addClass("active")}))},ProgressSteps.prototype.markCompleted=function(stepIndex){this.$container.find(".jb-step").eq(stepIndex).addClass("completed")},ProgressSteps.prototype.checkSectionCompletion=function(){var self=this;Object.keys(this.config.sectionMap).forEach((function(sectionId){var $section=$("#id_"+sectionId);if($section.length){var $requiredFields=$section.closest("fieldset").find("[required], .required input, .required select, .required textarea"),allFilled=!0;if($requiredFields.each((function(){if(!$(this).val())return allFilled=!1,!1})),allFilled&&$requiredFields.length>0){var stepIndex=self.config.sectionMap[sectionId];self.markCompleted(stepIndex)}}}))},{init:function(config){return new ProgressSteps(config)}}}));

//# sourceMappingURL=progress_steps.min.js.map