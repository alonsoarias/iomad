{{!
    @template core_courseformat/local/courseindex/drawer

    Course index drawer - Complete Redesign for Theme Compecer
    Professional and clean interface with simplified progress display

    Example context (json):
    {}
}}
<nav id="courseindex" class="courseindex-new-design">

  {{! Course Overall Progress Header - Simplified }}
  <div class="courseindex-progress-header" id="courseindex-progress-header" style="display: none;">
    <h3 class="progress-title">{{#str}}courseprogress, theme_compecer{{/str}}</h3>
    <div class="progress-bar-wrapper">
      <div class="progress-bar-fill"
           data-region="course-progress-bar"
           style="width: 0%;"
           role="progressbar"
           aria-valuenow="0"
           aria-valuemin="0"
           aria-valuemax="100">
      </div>
    </div>
    <div class="progress-percentage-display" data-region="course-percentage">0%</div>
  </div>

  {{! Message when completion tracking is not enabled }}
  <div class="courseindex-no-tracking" id="courseindex-no-tracking" style="display: none;">
    <div class="no-tracking-message">
      <i class="fa fa-info-circle"></i>
      <span>{{#str}}completionnotenabledcourse, theme_compecer{{/str}}</span>
    </div>
  </div>

  {{! Icon Legend }}
  <div class="courseindex-icon-legend" id="courseindex-icon-legend" style="display: none;">
    <div class="legend-title">{{#str}}iconlegend, theme_compecer{{/str}}</div>
    <div class="legend-items">
      <div class="legend-item">
        <span class="legend-icon not-started">○</span>
        <span>{{#str}}notstarted, theme_compecer{{/str}}</span>
      </div>
      <div class="legend-item">
        <span class="legend-icon in-progress">◐</span>
        <span>{{#str}}inprogress, theme_compecer{{/str}}</span>
      </div>
      <div class="legend-item">
        <span class="legend-icon completed">✓</span>
        <span>{{#str}}completed, core_completion{{/str}}</span>
      </div>
    </div>
  </div>

  {{! Sections List }}
  <div id="courseindex-content" class="courseindex-content">
    {{> core_courseformat/local/courseindex/placeholders}}
  </div>

</nav>
{{#js}}
require(['core_courseformat/local/courseindex/drawer', 'theme_compecer/courseindex_progress'], function(component, progressLoader) {
  component.init('courseindex');
  // Initialize progress loader with course ID
  if (M.cfg && M.cfg.courseId) {
    progressLoader.init(M.cfg.courseId);
  }
});
{{/js}}
