{{!
    @template core_courseformat/local/courseindex/cm

    Course index module entry - Redesigned for Theme Compecer
    Includes activity status icon (○ not started, ◐ in progress, ✓ completed)

    Example context (json):
    {
      "id": "12",
      "name": "Announcements",
      "url": "#",
      "visible": 1,
      "isactive": 1,
      "uniqid": "0",
      "accessvisible": 1,
      "hascmrestrictions": 0
    }
}}
<li class="course-index-item {{#isactive}}active{{/isactive}}
           {{#hascmrestrictions}}restrictions{{/hascmrestrictions}}
           {{^accessvisible}}dimmed{{/accessvisible}}
           {{#indent}} indented {{/indent}}"
    id="{{uniqid}}-course-index-cm-{{id}}"
    data-for="cm"
    data-id="{{id}}"
    role="treeitem">
  {{^hasdelegatedsection}}

    {{! Activity status icon - will be populated by JavaScript }}
    <span class="activity-status-icon status-not-started"
          data-cm-id="{{id}}"
          aria-label="{{#str}}notstarted, theme_compecer{{/str}}">
    </span>

    {{! Activity link }}
    {{#uservisible}}
      <a class="course-index-link text-truncate"
         {{#url}}href="{{{url}}}"{{/url}}
         {{^url}}href="#{{{anchor}}}" data-anchor="true"{{/url}}
         data-for="cm_name"
         tabindex="-1"
         title="{{{name}}}">
        {{{name}}}
      </a>
    {{/uservisible}}
    {{^uservisible}}
      <a class="course-index-link text-truncate"
         href="#{{{anchor}}}"
         data-for="cm_name"
         tabindex="-1"
         data-anchor="true"
         title="{{{name}}}">
        {{{name}}}
      </a>
    {{/uservisible}}

  {{/hasdelegatedsection}}
  {{#hasdelegatedsection}}
    {{#sectioninfo}}
      {{> core_courseformat/local/courseindex/section}}
    {{/sectioninfo}}
  {{/hasdelegatedsection}}
</li>
{{#js}}
require(['core_courseformat/local/courseindex/cm'], function(component) {
  component.init('{{uniqid}}-course-index-cm-{{id}}');
});
{{/js}}
