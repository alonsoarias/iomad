{"version":3,"file":"customizer.min.js","sources":["../src/customizer.js"],"sourcesContent":["/* eslint-disable no-console */\n/* eslint-disable no-undef */\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @module     theme_remui/customizer\n * @copyright  (c) 2023 WisdmLabs (https://wisdmlabs.com/)\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author     Yogesh Shirsath\n */\n\nimport $ from \"jquery\";\nimport Ajax from \"core/ajax\";\nimport Notification from \"core/notification\";\nimport ModalFactory from \"core/modal_factory\";\nimport \"core/modal_save_cancel\";\nimport ModalEvents from \"core/modal_events\";\nimport Utils from \"theme_remui/customizer/utils\";\nimport globalSite from \"theme_remui/customizer/global-site\";\nimport globalBody from \"theme_remui/customizer/global-body\";\nimport globalColors from \"theme_remui/customizer/global-colors\";\nimport globalHeading from \"theme_remui/customizer/global-heading\";\nimport globalButtons from \"theme_remui/customizer/global-buttons\";\nimport headerLogo from \"theme_remui/customizer/header-logo\";\nimport headerSiteDesign from \"theme_remui/customizer/header-design\";\nimport footer from \"theme_remui/customizer/footer\";\nimport additionalSettings from \"theme_remui/customizer/additional-settings\";\nimport iconsettings from \"theme_remui/customizer/icon-settings\";\nimport quickSetup from \"theme_remui/customizer/quicksetup-settings\";\nimport login from \"theme_remui/customizer/login\";\nimport \"theme_remui/color-picker\";\nimport feedbackcollection from  \"theme_remui/feedbackcollection\";\n\n/**\n * Ajax promise requests\n */\nvar PROMISES = {\n    /**\n     * Save settings to database\n     * @param {Array} settings Settings string\n     * @param {Object} options Additional options.\n     * @return {Promise}\n     */\n    SAVE_SETTINGS: (settings, options) => {\n        if (options == undefined) {\n            options = {};\n        }\n        return Ajax.call([{\n            methodname: \"theme_remui_customizer_save_settings\",\n            args: {\n                settings: JSON.stringify(settings),\n                options: JSON.stringify(options)\n            },\n        }])[0];\n    },\n};\n\n/**\n * Customizer panel settings handler.\n */\nvar handlers = [\n    globalSite,\n    globalBody,\n    globalColors,\n    globalHeading,\n    globalButtons,\n    headerLogo,\n    headerSiteDesign,\n    footer,\n    additionalSettings,\n    iconsettings,\n    quickSetup,\n    login,\n];\n\n/**\n * Selectors\n */\nvar SELECTOR = {\n    CUSTOMIZER: \"#customizer\",\n    CONTROLS: \"#customize-controls\",\n    MODE_TOGGLE: \"#customize-controls .mode-toggle\",\n    WRAP: \"#customizer-wrap\",\n    CLOSE_CUSTOMIZER: \".customize-controls-close\",\n    CUSTMIZER_TOGGLE: \".customizer-controls-toggle\",\n    COLOR_SETTING: \".setting-type-color\",\n    PUBLISH: \"#publish-settings\",\n    IFRAME: \"#customizer-frame\",\n    MAIN_OVERLAY: \"#main-overlay\",\n    PANEL_LINK: \"[sidebar-panel-link]\",\n    PANEL_BACK: \".customize-panel-back\",\n    PANEL: \".sidebar-panel\",\n    PANEL_ID: \"panel-id\",\n    PREVIOUS: \"previous\",\n    CURRENT: \"current\",\n    NEXT: \"next\",\n    SETTINGS_RESET: \"#reset-settings\",\n    INPUT_RESET: \".input-reset\",\n    SELECT_RESET: \".select-reset\",\n    CHECKBOX_RESET: \".checkbox-reset\",\n    COLOR_RESET: \".color-reset\",\n    TEXTAREA_RESET: \".textarea-reset\",\n    HTMLEDITOR_RESET: \".htmleditor-reset\",\n    HEADING_TOGGLE: \".heading-toggle\",\n    RANGEINPUT: \".form-range\",\n    SETTINGS_SAVE_MODAL: \"#settings-save-modal\"\n};\n\nvar CONSTANTS = {\n    NIGHTEYESTATE: 'nighteyewState',\n    CURRNIGHTEYESTATE: 'currnighteyewState'\n};\n\n// Flag to track if footer settings have been downloaded\nwindow.footerSettingsDownloaded = false;\n\n/**\n * Apply settings on iframe load.\n */\nfunction applySettings() {\n    handlers.forEach(handler => handler.apply());\n    // Trigger apply so external js can handle customizer apply.\n    $(document).trigger(\"edwiser.customizer.apply\");\n}\n\n/**\n * Initialize setting change handler.\n */\nfunction initHandlers() {\n    handlers.forEach(handler => handler.init());\n    // Trigger init so external js can handle customizer init.\n    $(document).trigger(\"edwiser.customizer.init\");\n}\n\n/**\n * Field reset handlers.\n */\nfunction resetHandlers() {\n    // Color reset.\n    $(SELECTOR.COLOR_RESET).on(\"click\", function() {\n        let color = $(this).data(\"default\");\n        $(this).closest('.form-group').find(\"input\").spectrum(\"set\", color);\n        $(this).closest('.form-group').find(\"input\").trigger(\"color.changed\", color);\n    });\n\n    // Checkbox reset.\n    $(SELECTOR.CHECKBOX_RESET).on(\"click\", function() {\n        let value = $(this).data(\"default\");\n        $(this).closest('.form-group').find(\"input\").prop(\n            \"checked\",\n            $(this).closest('.form-group').find(\"input\").val() == value\n        );\n        $(this).closest('.form-group').find(\"input\").trigger(\"change\").trigger(\"input\");\n    });\n\n    // Reset select.\n    $(SELECTOR.SELECT_RESET).on(\"click\", function() {\n        let value = $(this).data(\"default\");\n        $(this).closest('.form-group').find(\"select\").val(value).trigger(\"input\").trigger(\"change\");\n    });\n\n    // Reset input.\n    $(SELECTOR.INPUT_RESET).on(\"click\", function() {\n        let value = $(this).data(\"default\");\n        $(this).closest('.form-group').find(\"input\").val(value).trigger(\"input\").trigger(\"change\");\n    });\n\n\n    // Reset textarea.\n    $(SELECTOR.TEXTAREA_RESET).on(\"click\", function() {\n        let value = $(this).data(\"default\");\n        $(this)\n            .closest('.form-group')\n            .find(\"textarea\")\n            .val(value)\n            .trigger(\"input\")\n            .trigger(\"change\");\n    });\n\n    // Reset htmleditor.\n    $(SELECTOR.HTMLEDITOR_RESET).on(\"click\", function() {\n        let value = $(this).data(\"default\");\n        let textarea = $(this).closest('.form-group').find(\"textarea\");\n        $(this)\n            .closest('.form-group')\n            .find(`#${textarea.attr(\"id\")}editable`)\n            .html(value);\n        textarea.val(value).trigger(\"input\").trigger(\"change\");\n    });\n}\n\n/**\n * Handle page load and link change of iframe.\n * When loaded or link changed, reapplying all settings.\n */\nfunction iframeHandler() {\n    var contentDocument = Utils.getDocument();\n    var contentWindow = Utils.getWindow();\n\n    $(contentDocument).find(\"body\").addClass(\"customizer-opened\");\n    $(contentDocument)\n        .find(\".customizer-editing-icon\")\n        .closest(\"a\")\n        .addClass(\"d-none\")\n        .removeClass(\"d-flex\");\n    $(contentDocument)\n        .find(\"#edwpersonalizer-settings .activatepersonalizer\")\n        .addClass('d-none');\n    $(contentDocument)\n        .find(\"#edwpersonalizer-settings .activepersonalizer\")\n        .removeClass('d-none');\n    $(contentDocument).find(\"#sidebar-setting\").addClass(\"d-none\");\n    $(contentDocument).find(\".nav-darkmode\").addClass('d-none').removeClass('d-flex');\n    $(document).trigger(\"remui-adjust-left-side\");\n\n    // Change browser url on iframe navigation.\n    window.history.replaceState(\n        \"pagechange\",\n        document.title,\n        M.cfg.wwwroot +\n        \"/theme/remui/customizer.php?url=\" +\n        encodeURI(contentWindow.location.href)\n    );\n\n    // Set current iframe url to customizer close button.\n    $(SELECTOR.CLOSE_CUSTOMIZER).attr(\"href\", contentWindow.location.href);\n\n    // Apply setting on iframe load.\n    applySettings();\n\n    // Hide overlay when iframe loaded.\n    Utils.hideLoader();\n\n    setTimeout(() => {\n        // Iframe on unload event.\n        contentWindow.onbeforeunload = function() {\n            console.log('Iframe navigated.');\n            Utils.showLoader();\n        };\n    }, 2000);\n}\n\n/**\n * Get settings array which preserve settings before reset.\n * @returns {array} Settings array\n */\nfunction preserveResetSettings() {\n    let element,\n    settings = [],\n    ids = [\n        'customcss',\n        'facebooksetting',\n        'twittersetting',\n        'linkedinsetting',\n        'youtubesetting',\n        'instagramsetting',\n        'pinterestsetting',\n        'quorasetting',\n        'whatsappsetting',\n        'telegramsetting',\n        'footerprivacypolicy',\n        'footertermsandconditions',\n        'brandlogotext',\n        'footercolumn',\n        'footercolumnsize',\n        'poweredbyedwiser',\n        'footerprivacypolicyshow'\n    ];\n    for (let i = 1; i <= 5; i++) {\n        ids.push('footercolumn' + i + 'type');\n        ids.push('footercolumn' + i + 'title');\n        ids.push('footercolumn' + i + 'customhtml');\n        ids.push('socialmediaiconcol' + i);\n\n        // Add social media settings for each column\n        let socials = ['facebook', 'twitter', 'linkedin', 'youtube', 'instagram', 'pinterest', 'quora', 'whatsapp', 'telegram'];\n        socials.forEach(social => {\n            ids.push(social + 'setting' + i);\n        });\n\n        ids.push('footercolumn' + i + 'menu');\n    }\n\n    // Add footer-secondary social media settings\n    let socials = ['facebook', 'twitter', 'linkedin', 'youtube', 'instagram', 'pinterest', 'quora', 'whatsapp', 'telegram'];\n    socials.forEach(social => {\n        ids.push(social + 'settingsecondary');\n    });\n    ids.forEach(id => {\n        element = $('[name=\"' + id + '\"]');\n        element.closest('.fitem').find('.reset-button').trigger('click');\n        if (element.is('[type=\"checkbox\"]')) {\n            settings.push({\n                name: id,\n                value: element.is(':checked')\n            });\n        } else if (element.is('select[multiple]')) {\n            element.val().forEach(value => {\n                settings.push({\n                    name: id,\n                    value: value\n                });\n            });\n        } else {\n            settings.push({\n                name: id,\n                value: element.val()\n            });\n        }\n\n    });\n    // let selectedFooterDesign = $('input[name=\"footer-design-selector\"]:checked').val();\n    // if (selectedFooterDesign) {\n    //     settings.push({\n    //         name: 'footer-design-selector',\n    //         value: selectedFooterDesign\n    //     });\n    // }\n    return settings;\n}\n\n/**\n * Reset all settings.\n * It also shows confirmation modal.\n */\nfunction resetAllSettingHandler() {\n    let body = M.util.get_string(\"reset-settings-description\", \"theme_remui\");\n    body += '<ul class\"pl-5\">';\n    [\n        'customcss',\n        'socialall',\n        'loginpagesitedescription',\n        'footerprivacypolicy',\n        'footertermsandconditions',\n        'footercolumnsettings'\n    ].forEach(id => {\n        body += '<li>' + M.util.get_string(id, 'theme_remui') + '</li>';\n    });\n\n    body += '</ul>';\n    ModalFactory.create({\n            title: M.util.get_string(\"reset\", \"moodle\"),\n            body: body,\n            type: ModalFactory.types.SAVE_CANCEL,\n        },\n        $(\"#create-modal\")\n    ).done(modal => {\n        modal.show();\n        var root = modal.getRoot();\n        root.find('[data-region=\"footer\"]').html(`\n            <button type=\"button\" class=\"btn btn-outline-danger\" data-action=\"reset-all\">\n                ${M.util.get_string('resetall', 'theme_remui')}\n            </button>\n            <button type=\"button\" class=\"btn btn-danger\" data-action=\"reset-some\">\n                ${M.util.get_string('reset', 'theme_remui')}\n            </button>\n        `);\n        function reset(settings) {\n            $(SELECTOR.MAIN_OVERLAY).removeClass(\"d-none\");\n            modal.destroy();\n            PROMISES.SAVE_SETTINGS(settings, {\n                    reset: true\n                })\n                .done(() => {\n                    location.reload();\n                })\n                .fail(ex => {\n                    Notification.exception(ex);\n                });\n        }\n        root.on('click', '[data-action=\"reset-all\"]', () => {\n            let preservedSettings = [\n                {\n                    name: 'siteicon',\n                    value: 'graduation-cap'\n                }\n            ];\n            reset(preservedSettings);\n        });\n        root.on('click', '[data-action=\"reset-some\"]', () => {\n            $('[data-action=\"reset-some\"]').prop('disabled', true).html('<i class=\"fa fa-spinner fa-spin\"></i> Resetting...');\n            // reset(preserveResetSettings());\n            setTimeout(() => {\n                reset(preserveResetSettings());\n            }, 1);\n        });\n    });\n}\n\n/**\n * Show download confirmation modal before publishing changes\n */\nfunction showDownloadConfirmationModal() {\n    const body = M.util.get_string(\"downloadalerttext\", \"theme_remui\");\n\n    ModalFactory.create({\n        title: \"Confirm\",\n        body: body,\n        type: ModalFactory.types.SAVE_CANCEL,\n    }, $(\"#create-modal\")).done(modal => {\n        modal.show();\n        const root = modal.getRoot();\n        root.find('[data-region=\"footer\"]').html(`\n            <button type=\"button\" class=\"btn btn-outline-primary\" data-action=\"continue-without-download\">\n                ${M.util.get_string(\"skipdownload\", \"theme_remui\")}\n            </button>\n            <button type=\"button\" class=\"btn btn-primary\" data-action=\"download-and-continue\">\n                ${M.util.get_string(\"downloadandcontinue\", \"theme_remui\")}\n            </button>\n        `);\n\n        // Handle continue without download\n        root.on('click', '[data-action=\"continue-without-download\"]', () => {\n            modal.destroy();\n            publishChanges();\n        });\n\n        // Handle download and continue\n        root.on('click', '[data-action=\"download-and-continue\"]', () => {\n            modal.destroy();\n            // Trigger download first, then publish\n            triggerDownloadAndPublish();\n        });\n    });\n}\n\n/**\n * Trigger download and then publish changes\n */\nfunction triggerDownloadAndPublish() {\n    // Get the current footer design (flayout)\n    const footerDesignSelector = $('input[name=\"footer-design-selector\"].saveddesign');\n    const flayout = footerDesignSelector.length ? footerDesignSelector.data('flayout') : null;\n\n    if (!flayout) {\n        console.error(\"No footer design selected\");\n        publishChanges();\n        return;\n    }\n\n    // Show loading state\n    $(SELECTOR.PUBLISH).prop('disabled', true).html('<i class=\"fa fa-spinner fa-spin\"></i> Downloading...');\n\n    // Make AJAX call to fetch footer settings\n    Ajax.call([{\n        methodname: \"theme_remui_do_personalization_action\",\n        args: {\n            action: \"get_footer_settings\",\n            config: JSON.stringify({\n                flayout: flayout\n            })\n        }\n    }])[0].done(function(response) {\n        // Parse response if it's a string\n        if (typeof response === 'string') {\n            response = JSON.parse(response);\n        }\n\n        if (response.success) {\n            // Create and download JSON file\n            const blob = new Blob([JSON.stringify(response.settings, null, 2)], { type: 'application/json' });\n            const filename = 'footer-settings.json';\n\n            // Create a link element to download the file\n            const link = document.createElement('a');\n            link.href = URL.createObjectURL(blob);\n            link.download = filename;\n\n            // Trigger the download\n            document.body.appendChild(link);\n            link.click();\n\n            // Clean up\n            document.body.removeChild(link);\n            URL.revokeObjectURL(link.href);\n\n            // Set flag to indicate download was successful\n            window.footerSettingsDownloaded = true;\n            console.log(\"Footer settings downloaded successfully! Count:\", response.count);\n        } else {\n            console.error(\"Failed to download footer settings:\", response.message);\n        }\n    }).fail(function(error) {\n        console.error(\"Error downloading footer settings:\", error);\n    }).always(function() {\n        // Reset button state and proceed with publish\n        $(SELECTOR.PUBLISH).prop('disabled', false).html('Publish');\n        publishChanges();\n    });\n}\n\n/**\n * Publish changes to server.\n */\nfunction publishChanges() {\n    console.log('Saving setting to site.');\n    $(SELECTOR.MAIN_OVERLAY).removeClass(\"d-none\");\n    let settings = $(SELECTOR.CONTROLS).serializeArray();\n    settings.forEach((element, index) => {\n        if ($(`[name=\"${element.name}\"]`).is(\".site-colorpicker\")) {\n            element.value = $(`[name=\"${element.name}\"]`)\n                .spectrum(\"get\")\n                .toString();\n            settings[index] = element;\n        }\n    });\n    PROMISES.SAVE_SETTINGS(settings)\n        .done(response => {\n            let obj = {};\n            if (response.status == false) {\n                obj.title = M.util.get_string(\"error\", \"theme_remui\");\n                obj.body = response.errors;\n            } else {\n                obj.title = M.util.get_string(\"success\", \"moodle\");\n                obj.body = response.message;\n                $(SELECTOR.CONTROLS).data(\"unsaved\", false);\n            }\n            console.log('Settings saved.');\n            location.reload();\n            // $(SELECTOR.SETTINGS_SAVE_MODAL).modal('show');\n            // $(SELECTOR.SETTINGS_SAVE_MODAL).find('[data-region=\"title\"]').text(obj.title);\n            // $(SELECTOR.SETTINGS_SAVE_MODAL).find('[data-region=\"body\"]').text(obj.body);\n            // $(SELECTOR.MAIN_OVERLAY).addClass(\"d-none\");\n        })\n        .fail(function(ex) {\n            console.log('Error:' + ex.message);\n            Notification.exception(ex);\n            $(SELECTOR.MAIN_OVERLAY).addClass(\"d-none\");\n        });\n}\n\n/**\n * Close customizer.\n * @param {DOMEvent} event Click event.\n * @returns {boolean}\n */\nfunction closeCustomizer(event) {\n    if ($(SELECTOR.CONTROLS).data(\"unsaved\") == false) {\n        return true;\n    }\n    event.preventDefault();\n    ModalFactory.create({\n            title: M.util.get_string(\"customizer-close-heading\", \"theme_remui\"),\n            body: M.util.get_string(\n                \"customizer-close-description\",\n                \"theme_remui\"\n            ),\n            type: ModalFactory.types.SAVE_CANCEL,\n        },\n        $(\"#create\")\n    ).done(modal => {\n        modal.show();\n        modal.setSaveButtonText(M.util.get_string(\"yes\", \"moodle\"));\n        var root = modal.getRoot();\n        root.on(ModalEvents.save,async  () => {\n            const feedbackcontext = await feedbackcollection.get_feedback_context(\"visualpersonalizer_question\");\n            if(JSON.parse(feedbackcontext)){\n                feedbackcollection.render_feedbackform(\"visualpersonalizer_question\",function(){\n\n                    // Attach click event to a specific button within the rendered form\n                    $(document).on(\"click\",\"#feedbackcollection-form .skip-btn\", function() {\n                        // feedbackcollection.close_modal();\n                        window.location = $(SELECTOR.CLOSE_CUSTOMIZER).attr(\"href\");\n                    });\n\n                    $(document).on(\"submit\", \"#feedbackcollection-form\", function(e) {\n                        e.preventDefault();\n                        // feedbackcollection.submit_feedback_handler(e);\n                        window.location = $(SELECTOR.CLOSE_CUSTOMIZER).attr(\"href\");\n                    });\n                });\n                console.log(\"inside feedback collection\");\n            }else{\n                window.location = $(SELECTOR.CLOSE_CUSTOMIZER).attr(\"href\");\n            }\n        });\n    });\n\n    // Setting DM status back to saved preference of user.\n    localStorage.setItem(CONSTANTS.NIGHTEYESTATE, localStorage.getItem(CONSTANTS.CURRNIGHTEYESTATE));\n    return true;\n}\n\n/**\n * Initialize events\n */\nfunction init() {\n    // Initialize customizer only once.\n    if (window[\"customizer-enabled\"] == true) {\n        return;\n    }\n    window[\"customizer-enabled\"] = true;\n\n    // Save current state of DM to another variable.\n    localStorage.setItem(CONSTANTS.CURRNIGHTEYESTATE, localStorage.getItem(CONSTANTS.NIGHTEYESTATE));\n    // Reset DM on personalizer.\n    localStorage.setItem(CONSTANTS.NIGHTEYESTATE, 2);\n\n    $(() => {\n        initHandlers();\n        resetHandlers();\n\n        // Lazy loading iframe.\n        $(SELECTOR.IFRAME).attr('src', $(SELECTOR.IFRAME).data('src'));\n\n        // Iframe on load event.\n        $(SELECTOR.IFRAME).get(0).addEventListener(\"load\", iframeHandler);\n\n        $(SELECTOR.SETTINGS_RESET).on(\"click\", resetAllSettingHandler);\n\n        // Open next panel.\n        $(SELECTOR.PANEL_LINK).on(\"click\", function() {\n            $(SELECTOR.PANEL + \"#\" + $(this).data(SELECTOR.PANEL_ID)).addClass(\n                SELECTOR.CURRENT\n            );\n            $(this).closest(SELECTOR.PANEL).removeClass(SELECTOR.CURRENT);\n        });\n\n        // Hide setting save modal.\n        $(SELECTOR.SETTINGS_SAVE_MODAL + ' [data-action=\"close\"]').on('click', function() {\n            $(SELECTOR.SETTINGS_SAVE_MODAL).modal('hide');\n        });\n        $('body').on('click', function(e) {\n            var container = $(SELECTOR.SETTINGS_SAVE_MODAL);\n            if (!container.is(e.target) && container.has(e.target).length === 0) {\n                container.modal('hide');\n            }\n        });\n\n\n        // Go back to previous panel.\n        $(SELECTOR.PANEL_BACK).on(\"click\", function() {\n            $(\n                SELECTOR.PANEL +\n                \":not(\" +\n                SELECTOR.PANEL +\n                \"#\" +\n                $(this).data(SELECTOR.PANEL_ID) +\n                \")\"\n            ).removeClass(SELECTOR.CURRENT);\n            $(SELECTOR.PANEL + \"#\" + $(this).data(SELECTOR.PANEL_ID)).addClass(\n                SELECTOR.CURRENT\n            );\n        });\n\n        // Toggle screen mode.\n        $(SELECTOR.MODE_TOGGLE).on(\"click\", function() {\n            $(SELECTOR.CUSTOMIZER)\n                .removeClass(\"mode-desktop mode-tablet mode-mobile\")\n                .addClass(`mode-${$(this).data(\"mode\")}`);\n        });\n\n        // Prevent submission.\n        $(SELECTOR.CONTROLS).on(\"submit\", function(event) {\n            event.preventDefault();\n            return false;\n        });\n\n        // Form change handler.\n        $(`\n            ${SELECTOR.CONTROLS} input[type=\"text\"],\n            ${SELECTOR.CONTROLS} input[type=\"number\"],\n            ${SELECTOR.CONTROLS} input[type=\"checkbox\"]\n            ${SELECTOR.CONTROLS} textarea,\n            ${SELECTOR.CONTROLS} select\n        `).on(\"change\", function() {\n            $(SELECTOR.CONTROLS).data(\"unsaved\", true);\n        });\n        $(`${SELECTOR.CONTROLS} input[type=\"color\"]`).on(\n            \"color.changed\",\n            function() {\n                $(SELECTOR.CONTROLS).data(\"unsaved\", true);\n            }\n        );\n\n        // Submit settings to database.\n        $(SELECTOR.PUBLISH).on(\"click\", function() {\n            // Check if footer settings have been downloaded\n            if (!window.footerSettingsDownloaded) {\n                showDownloadConfirmationModal();\n            } else {\n                publishChanges();\n            }\n        });\n\n        // Handle customizer close event.\n        $(SELECTOR.CLOSE_CUSTOMIZER).on(\"click\", closeCustomizer);\n\n        // Toggle customizer.\n        $(SELECTOR.CUSTMIZER_TOGGLE).on(\"click\", function() {\n            $(\"body\").toggleClass(\"full-customizer\");\n        });\n\n        // Toggle headings.\n        $(SELECTOR.HEADING_TOGGLE).on(\"click\", function() {\n            $(this).toggleClass(\"collapsed\");\n            $(this).next().slideToggle(\"fast\");\n        });\n\n        // Range slider observer.\n        $(\"body\").on(\"input\", SELECTOR.RANGEINPUT, function() {\n            let id = $(this).attr(\"id\");\n            let value = $(this).val();\n            $(`#${id}-range-value`).text(value);\n        });\n\n        // Turn On dark mode in personalizer\n        $(\".previewswitchon\").on(\"click\", function() {\n            // Set darkmode status to 1(Enable).\n            localStorage.setItem(CONSTANTS.NIGHTEYESTATE, 1);\n\n            // Reload Customizer iframe.\n            $(SELECTOR.IFRAME).attr('src', $(SELECTOR.IFRAME).data('src'));\n\n            $('#customizer').addClass(\"showdm\");\n            $(\".previewswitchon\").addClass('d-none');\n            $(\".previewswitchoff\").removeClass('d-none');\n            $(\".customizer-panels\").css(\"overflow-y\", \"hidden\");\n        });\n        $(\".previewswitchoff\").on(\"click\", function() {\n            // Set darkmode status to 2 (Disable).\n            localStorage.setItem(CONSTANTS.NIGHTEYESTATE, 2);\n\n            // Reload Customizer iframe.\n            $(SELECTOR.IFRAME).attr('src', $(SELECTOR.IFRAME).data('src'));\n            $('#customizer').removeClass(\"showdm\");\n            $(\".previewswitchoff\").addClass('d-none');\n            $(\".previewswitchon\").removeClass('d-none');\n            $(\".customizer-panels\").css(\"overflow-y\", \"auto\");\n        });\n\n        // Download footer settings button handler\n        $(document).on(\"click\", \".footer-template-download-button\", function() {\n            console.log(\"Download footer settings clicked\");\n\n            // Show loading state\n            $(this).prop('disabled', true).html('<i class=\"fa fa-spinner fa-spin\"></i> Downloading...');\n\n            // Get the current footer design (flayout)\n            const footerDesignSelector = $('input[name=\"footer-design-selector\"].saveddesign');\n            const flayout = footerDesignSelector.length ? footerDesignSelector.data('flayout') : null;\n            console.log(\"flayout\", flayout);\n            if (!flayout) {\n                console.error(\"No footer design selected\");\n                return;\n            }\n\n            // Make AJAX call to fetch footer settings\n            Ajax.call([{\n                methodname: \"theme_remui_do_personalization_action\",\n                args: {\n                    action: \"get_footer_settings\",\n                    config: JSON.stringify({\n                        flayout: flayout\n                    })\n                }\n            }])[0].done(function(response) {\n                console.log(\"Footer settings response:\", response);\n\n                // Parse response if it's a string (like in the working example)\n                if (typeof response === 'string') {\n                    response = JSON.parse(response);\n                }\n\n                // Check for errors in the response\n                if (response.error) {\n                    console.error(\"Error in response:\", response.message);\n                    return;\n                }\n\n                if (response.success) {\n                    // Create and download JSON file (following the working pattern)\n                    const blob = new Blob([JSON.stringify(response.settings, null, 2)], { type: 'application/json' });\n                    const filename = 'footer-settings.json';\n\n                    // Create a link element to download the file\n                    const link = document.createElement('a');\n                    link.href = URL.createObjectURL(blob);\n                    link.download = filename;\n\n                    // Trigger the download\n                    document.body.appendChild(link);\n                    link.click();\n\n                    // Clean up\n                    document.body.removeChild(link);\n                    URL.revokeObjectURL(link.href);\n\n                    // Set flag to indicate download was successful\n                    window.footerSettingsDownloaded = true;\n                    console.log(\"Footer settings downloaded successfully! Count:\", response.count);\n                } else {\n                    // Show error message\n                    console.error(\"Failed to download footer settings:\", response.message);\n                }\n            }).fail(function(error) {\n                console.error(\"Error downloading footer settings:\", error);\n            }).always(function() {\n                // Reset button state\n                $(\".footer-template-download-button\").prop('disabled', false).html('Download');\n            });\n        });\n    });\n}\n\nexport {\n    init\n};\n"],"names":["window","localStorage","setItem","CONSTANTS","getItem","handlers","forEach","handler","init","document","trigger","SELECTOR","on","color","this","data","closest","find","spectrum","value","prop","val","textarea","attr","html","get","addEventListener","iframeHandler","resetAllSettingHandler","addClass","removeClass","modal","e","container","is","target","has","length","event","preventDefault","footerSettingsDownloaded","publishChanges","body","M","util","get_string","create","title","type","ModalFactory","types","SAVE_CANCEL","done","show","root","getRoot","destroy","footerDesignSelector","flayout","console","error","call","methodname","args","action","config","JSON","stringify","response","parse","success","blob","Blob","settings","filename","link","createElement","href","URL","createObjectURL","download","appendChild","click","removeChild","revokeObjectURL","log","count","message","fail","always","triggerDownloadAndPublish","showDownloadConfirmationModal","closeCustomizer","toggleClass","next","slideToggle","id","text","css","PROMISES","options","undefined","Ajax","globalSite","globalBody","globalColors","globalHeading","globalButtons","headerLogo","headerSiteDesign","footer","additionalSettings","iconsettings","quickSetup","login","contentDocument","Utils","getDocument","contentWindow","getWindow","history","replaceState","cfg","wwwroot","encodeURI","location","apply","hideLoader","setTimeout","onbeforeunload","showLoader","reset","reload","ex","exception","name","element","ids","i","push","social","preserveResetSettings","serializeArray","index","toString","obj","status","errors","setSaveButtonText","ModalEvents","save","async","feedbackcontext","feedbackcollection","get_feedback_context","render_feedbackform"],"mappings":"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"}