define(["jquery"],function(i){"use strict";function e(){this.registerEventListeners(),this.disableSelection(),this.preventScreenshot()}var t='input, textarea, [contenteditable="true"], .editor_atto_content, .atto_text, [role="textbox"]';return e.prototype.registerEventListeners=function(){function o(e){if(e)return e=i(e),e.is(t)||(0<e.closest(t).length||(0<e.closest('[contenteditable="true"]').length||0<e.closest(".editor_atto_content, .atto_text").length))}i(document).on("contextmenu",function(e){if(!o(e.target))return e.preventDefault(),!1}),i(document).on("keydown",function(e){if(!o(e.target)){if(e.ctrlKey||e.metaKey){var t=e.key?e.key.toLowerCase():"",n=e.keyCode||e.which;if(-1!==["c","v","x","a","s","u","p","j","d","f","g","h","i","k","w"].indexOf(t)||-1!==[67,86,88,65,83,85,80,74,68,70,71,72,73,75,87].indexOf(n))return e.preventDefault(),e.stopPropagation(),!1}if("F12"===e.key||123===e.keyCode||123===e.which)return e.preventDefault(),!1;if(e.ctrlKey&&e.shiftKey){t=e.keyCode||e.which;if(73===t||74===t||67===t)return e.preventDefault(),e.stopPropagation(),!1}return!e.altKey||"PrintScreen"!==e.key&&44!==e.keyCode?"PrintScreen"===e.key||44===e.keyCode?(e.preventDefault(),!1):void 0:(e.preventDefault(),!1)}}),i(document).on("copy paste cut",function(e){if(!o(e.target))return e.preventDefault(),!1}),i(document).on("dragstart drop",function(e){if(!o(e.target))return e.preventDefault(),!1}),i(document).on("selectstart",function(e){if(!o(e.target))return e.preventDefault(),!1}),window.addEventListener?window.addEventListener("beforeprint",function(e){return e.preventDefault(),!1}):window.attachEvent&&window.attachEvent("onbeforeprint",function(e){return e.returnValue=!1})},e.prototype.disableSelection=function(){i("body").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","-webkit-touch-callout":"none","-webkit-tap-highlight-color":"transparent"}),0===i("#prevent-copy-paste-styles").length&&i("head").append('<style id="prevent-copy-paste-styles">body { -webkit-user-select: none !important; -moz-user-select: none !important; -ms-user-select: none !important; user-select: none !important; -webkit-touch-callout: none !important; -webkit-tap-highlight-color: transparent !important; }input, textarea, [contenteditable="true"], .editor_atto_content, .atto_text, [role="textbox"] { -webkit-user-select: text !important; -moz-user-select: text !important; -ms-user-select: text !important; user-select: text !important; }/* Permitir selecci√≥n dentro de editores de Moodle */.editor_atto_content *, .atto_text *, [contenteditable="true"] * { -webkit-user-select: text !important; -moz-user-select: text !important; -ms-user-select: text !important; user-select: text !important; }::selection { background: transparent; }::-moz-selection { background: transparent; }/* Pero permitir selecci√≥n en editores */input::selection, textarea::selection, [contenteditable="true"]::selection, .editor_atto_content ::selection, .atto_text ::selection { background: #b3d4fc !important; }input::-moz-selection, textarea::-moz-selection, [contenteditable="true"]::-moz-selection, .editor_atto_content ::-moz-selection, .atto_text ::-moz-selection { background: #b3d4fc !important; }</style>')},e.prototype.preventScreenshot=function(){var n=this;this.createScreenshotOverlay(),i(window).on("blur",function(){n.showScreenshotProtection()}),i(window).on("focus",function(){n.hideScreenshotProtection()}),document.addEventListener("visibilitychange",function(){document.hidden?n.showScreenshotProtection():setTimeout(function(){n.hideScreenshotProtection()},300)}),i(document).on("keyup keydown",function(e){var t=e.keyCode||e.which;return 44===t?(e.preventDefault(),n.showScreenshotWarning(),n.clearClipboard(),!1):e.metaKey&&e.shiftKey&&83===t||e.metaKey&&44===t||e.altKey&&44===t||e.metaKey&&e.shiftKey&&(51===t||52===t||53===t)||e.ctrlKey&&e.shiftKey&&83===t?(e.preventDefault(),n.showScreenshotWarning(),!1):void 0}),this.blockScreenCaptureAPI(),this.addScreenshotProtectionCSS()},e.prototype.createScreenshotOverlay=function(){var e,t;0===i("#screenshot-protection-overlay").length&&((e=i('<div id="screenshot-protection-overlay"></div>')).css({position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"linear-gradient(135deg, #1B9E88 0%, #158C78 100%)","z-index":"999999",display:"none","justify-content":"center","align-items":"center","flex-direction":"column",color:"#ffffff","font-family":"Verdana, Arial, sans-serif","text-align":"center"}),(t=i('<div class="protection-content"></div>')).css({padding:"40px",background:"rgba(255,255,255,0.1)","border-radius":"16px","backdrop-filter":"blur(10px)"}),t.html('<div style="font-size: 64px; margin-bottom: 20px;">üõ°Ô∏è</div><h2 style="font-size: 24px; margin-bottom: 10px; font-weight: bold;">Contenido Protegido</h2><p style="font-size: 16px; opacity: 0.9;">Las capturas de pantalla est√°n deshabilitadas en esta plataforma.</p><p style="font-size: 14px; opacity: 0.7; margin-top: 15px;">ISER - Instituto Superior de Educaci√≥n Rural</p>'),e.append(t),i("body").append(e))},e.prototype.showScreenshotProtection=function(){i("#screenshot-protection-overlay").css("display","flex")},e.prototype.hideScreenshotProtection=function(){i("#screenshot-protection-overlay").css("display","none")},e.prototype.showScreenshotWarning=function(){var e,t=this;t.showScreenshotProtection(),0===i("#screenshot-warning-toast").length&&((e=i('<div id="screenshot-warning-toast"></div>')).css({position:"fixed",bottom:"20px",right:"20px",background:"#EB4335",color:"#ffffff",padding:"15px 25px","border-radius":"8px","font-family":"Verdana, Arial, sans-serif","font-size":"14px","z-index":"9999999","box-shadow":"0 4px 12px rgba(0,0,0,0.3)",display:"none",animation:"slideIn 0.3s ease"}),e.html("‚ö†Ô∏è Las capturas de pantalla no est√°n permitidas"),i("body").append(e)),i("#screenshot-warning-toast").fadeIn(300),setTimeout(function(){i("#screenshot-warning-toast").fadeOut(300),t.hideScreenshotProtection()},3e3)},e.prototype.clearClipboard=function(){try{navigator.clipboard&&navigator.clipboard.writeText&&navigator.clipboard.writeText("").catch(function(){})}catch(e){}},e.prototype.blockScreenCaptureAPI=function(){var t;navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia&&(navigator.mediaDevices.getDisplayMedia.bind(navigator.mediaDevices),navigator.mediaDevices.getDisplayMedia=function(){return console.warn("Screen capture blocked by ISER security policy"),Promise.reject(new Error("Screen capture is not allowed on this platform"))}),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(t=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices),navigator.mediaDevices.getUserMedia=function(e){return e&&(!0===e.video||e.video&&"screen"===e.video.mediaSource)&&e.video&&"object"==typeof e.video&&("screen"===e.video.mediaSource||"window"===e.video.mediaSource||"application"===e.video.mediaSource)?(console.warn("Screen capture blocked by ISER security policy"),Promise.reject(new Error("Screen capture is not allowed"))):t(e)})},e.prototype.addScreenshotProtectionCSS=function(){0===i("#screenshot-protection-css").length&&i("head").append('<style id="screenshot-protection-css">/* Animaci√≥n para toast de advertencia */@keyframes slideIn {    from { transform: translateX(100%); opacity: 0; }    to { transform: translateX(0); opacity: 1; }}/* Protecci√≥n adicional durante impresi√≥n */@media print {    body * {        visibility: hidden !important;    }    body::before {        content: "Impresi√≥n no permitida - ISER";        visibility: visible !important;        position: fixed;        top: 50%;        left: 50%;        transform: translate(-50%, -50%);        font-size: 24px;        font-family: Verdana, Arial, sans-serif;        color: #1B9E88;    }}/* Marca de agua sutil para disuadir capturas */body::after {    content: "";    position: fixed;    top: 0;    left: 0;    width: 100%;    height: 100%;    pointer-events: none;    z-index: 99998;    background: repeating-linear-gradient(        45deg,        transparent,        transparent 200px,        rgba(27, 158, 136, 0.01) 200px,        rgba(27, 158, 136, 0.01) 400px    );}</style>')},{init:function(){i(document).ready(function(){return new e})}}});
//# sourceMappingURL=prevent_copy_paste.min.js.map